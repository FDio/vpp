{
  "comments": [
    {
      "key": {
        "uuid": "7780fbef_3e0f4f17",
        "filename": "src/plugins/http_static/static_server.c",
        "patchSetId": 2
      },
      "lineNbr": 896,
      "author": {
        "id": 193
      },
      "writtenOn": "2021-11-30T20:21:20Z",
      "side": 1,
      "message": "Nice find! \n\nNow one that could be done that should be an improvement is to ask here for SVM_FIFO_WANT_DEQ_NOTIF, so notification when something is dequeued, and in http_static_server_tx_callback, where the tx notification comes, check the amount of write space available. So if svm_fifo_max_enqueue (hs-\u003etx_fifo) \u003c limit, request a dequeue notification again without trying to send. Limit could be something like clib_min (svm_fifo_size (hs-\u003etx_fifo), 16 \u003c\u003c 10), or something like that. \n\nThat way we can keep the tx fifo reasonably full and the underlying transport busy.\n\nOn a separate note, for high throughput scenarios, I\u0027d use fifos that are at least 1MB (even larger if rtt is high)",
      "range": {
        "startLine": 895,
        "startChar": 0,
        "endLine": 896,
        "endChar": 39
      },
      "revId": "2ee685cd49aa34d464d82c64ac3c1496ba3040c9",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "53ef2749_345b3e9e",
        "filename": "src/plugins/http_static/static_server.c",
        "patchSetId": 2
      },
      "lineNbr": 896,
      "author": {
        "id": 2576
      },
      "writtenOn": "2021-12-02T16:51:41Z",
      "side": 1,
      "message": "Thanks Florin.\nPerhaps this should be a fifo feature? As there may be more scenarios that would require a notification when the fifo reaches some threshold.\nAdd additional flags: SVM_FIFO_WANT_DEQ_NOTIF_IF_LOW_THRESHOLD, SVM_FIFO_WANT_DEQ_NOTIF_IF_HIGH_THRESHOLD\nThresholds will be set by default to 0, full and an additional api for setting them can be provided. \nlet me know what you think. thanks",
      "parentUuid": "7780fbef_3e0f4f17",
      "range": {
        "startLine": 895,
        "startChar": 0,
        "endLine": 896,
        "endChar": 39
      },
      "revId": "2ee685cd49aa34d464d82c64ac3c1496ba3040c9",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "37f9f4a6_e992d9f1",
        "filename": "src/plugins/http_static/static_server.c",
        "patchSetId": 2
      },
      "lineNbr": 896,
      "author": {
        "id": 193
      },
      "writtenOn": "2021-12-02T17:24:22Z",
      "side": 1,
      "message": "Definitely a good feature to have. I\u0027m too spread out these days but if you have the time to look into it, I\u0027d be glad to review.",
      "parentUuid": "53ef2749_345b3e9e",
      "range": {
        "startLine": 895,
        "startChar": 0,
        "endLine": 896,
        "endChar": 39
      },
      "revId": "2ee685cd49aa34d464d82c64ac3c1496ba3040c9",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "12fbb694_b04b92c9",
        "filename": "src/plugins/http_static/static_server.c",
        "patchSetId": 2
      },
      "lineNbr": 896,
      "author": {
        "id": 2576
      },
      "writtenOn": "2021-12-02T17:34:15Z",
      "side": 1,
      "message": "Sure, I\u0027ll take a look.",
      "parentUuid": "37f9f4a6_e992d9f1",
      "range": {
        "startLine": 895,
        "startChar": 0,
        "endLine": 896,
        "endChar": 39
      },
      "revId": "2ee685cd49aa34d464d82c64ac3c1496ba3040c9",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    }
  ]
}