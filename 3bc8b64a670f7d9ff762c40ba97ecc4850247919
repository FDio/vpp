{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "20672bb8_6c9b1bc6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 3285
      },
      "writtenOn": "2026-01-05T18:44:07Z",
      "side": 1,
      "message": "Steps to Reproduce\n\nStart VPP with the necessary configuration to enable API socket communication.\nConnect to the VPP API socket using a client (e.g., govpp).\nCreate an l2fib events watcher in the client.\nRestart the client to trigger disconnection and reconnection to the API socket.\nCreate two VNFs and give them both the same IP address in the same bridge domain, have both of the VNFs constantly send ping requests, generating l2fib updates where each VNF has the same virtual MAC generating l2fib path updates.\n\nEnvironment\nVPP Version: vpp v24.02\nOS: Flatcar 4230.2.4\nKernel 6.6.110-flatcar\nContainer Runtime: containerd 1.7.23\nKubernetes: v1.32.2\n\nGDB Output\n\nThread 1 \"vpp_main\" received signal SIGSEGV, Segmentation fault.\nvl_mem_api_can_send (q\u003d0x0) at /root/vpp/src/vlibapi/memory_shared.c:795\n795     /root/vpp/src/vlibapi/memory_shared.c: No such file or directory.\n\n(gdb) bt full\n#0  vl_mem_api_can_send (q\u003d0x0) at /root/vpp/src/vlibapi/memory_shared.c:795\nNo locals.\n#1  0x00007f0fc3f08b10 in vl_api_can_send_msg (rp\u003d0x7f0f444bc878) at /root/vpp/src/vlibmemory/api.h:53\nNo locals.\n#2  l2fib_scan (vm\u003d0x7f0f40000700, start_time\u003d\u003coptimized out\u003e, event_only\u003d1 \u0027\\001\u0027) at /root/vpp/src/vnet/l2/l2_fib.c:1291\n        last_start \u003d \u003coptimized out\u003e\n        accum_t \u003d \u003coptimized out\u003e\n        delta_t \u003d \u003coptimized out\u003e\n        evt_idx \u003d \u003coptimized out\u003e\n        learn_count \u003d \u003coptimized out\u003e\n        client \u003d 1\n        cl_idx \u003d 117440640\n        mp \u003d 0x1301c7810\n        reg \u003d 0x7f0f444bc878\n        i \u003d \u003coptimized out\u003e\n        j \u003d \u003coptimized out\u003e\n        k \u003d \u003coptimized out\u003e\n        bd_index \u003d \u003coptimized out\u003e\n        fm \u003d \u003coptimized out\u003e\n        lm \u003d \u003coptimized out\u003e\n        h \u003d \u003coptimized out\u003e\n        v \u003d \u003coptimized out\u003e\n        b \u003d \u003coptimized out\u003e\n        doublebreak \u003d \u003coptimized out\u003e\n        b \u003d \u003coptimized out\u003e\n        v \u003d \u003coptimized out\u003e\n        kv \u003d \u003coptimized out\u003e\n        key \u003d \u003coptimized out\u003e\n        result \u003d \u003coptimized out\u003e\n        bd_index \u003d \u003coptimized out\u003e\n        sw_if_index \u003d \u003coptimized out\u003e\n        sn \u003d \u003coptimized out\u003e\n        bd_config \u003d \u003coptimized out\u003e\n        delta \u003d \u003coptimized out\u003e\n        age_out \u003d \u003coptimized out\u003e\n        kv \u003d \u003coptimized out\u003e\n#3  l2fib_mac_age_scanner_process (vm\u003d0x7f0f40000700, rt\u003d\u003coptimized out\u003e, f\u003d\u003coptimized out\u003e) at /root/vpp/src/vnet/l2/l2_fib.c:1363\n        scan \u003d \u003coptimized out\u003e\n        SCAN_MAC_AGE \u003d SCAN_MAC_AGE\n        SCAN_MAC_EVENT \u003d SCAN_MAC_EVENT\n        SCAN_DISABLE \u003d SCAN_DISABLE\n        event_data \u003d 0x7f0f443af618\n        enabled \u003d \u003coptimized out\u003e\n        next_age_scan_time \u003d \u003coptimized out\u003e\n        start_time \u003d \u003coptimized out\u003e\n        event_type \u003d \u003coptimized out\u003e\n        fm \u003d \u003coptimized out\u003e\n        lm \u003d \u003coptimized out\u003e\n#4  0x00007f0fc3ba9557 in vlib_process_bootstrap (_a\u003d\u003coptimized out\u003e) at /root/vpp/src/vlib/main.c:1221\n        a \u003d \u003coptimized out\u003e\n        vm \u003d 0x3\n        p \u003d 0x7f0f405e7980\n        f \u003d 0x3c\n        node \u003d 0x7f0f405e7980\n        n \u003d \u003coptimized out\u003e\n#5  0x00007f0fc3b2d4f4 in clib_calljmp () at /root/vpp/src/vppinfra/longjmp.S:123\nNo locals.\n#6  0x00007f0fc2ddfd50 in ?? ()\nNo symbol table info available.\n#7  0x00007f0fc3ba011a in vlib_process_startup (vm\u003d0x7f0f40000700, p\u003d0x7f0f405e7980, f\u003d0x0) at /root/vpp/src/vlib/main.c:1246\n        a \u003d {vm \u003d 0x737365, process \u003d 0x0, frame \u003d 0x0}\n        r \u003d 139703545623496\n#8  dispatch_process (vm\u003d0x7f0f40000700, p\u003d0x7f0f405e7980, f\u003d0x0, last_time_stamp\u003d4975705906266793) at /root/vpp/src/vlib/main.c:1302\n        nm \u003d 0x7f0f40000858\n        node_runtime \u003d 0x7f0f405e7980\n        node \u003d 0x7f0f405e7830\n        t \u003d 4975705906266793\n        old_process_index \u003d 4294967295\n        n_vectors \u003d \u003coptimized out\u003e\n        is_suspend \u003d \u003coptimized out\u003e\n#9  0x0000000000000000 in ?? ()\nNo symbol table info available.",
      "revId": "3bc8b64a670f7d9ff762c40ba97ecc4850247919",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "af9114ed_6edae265",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 10
      },
      "writtenOn": "2026-01-05T23:24:01Z",
      "side": 1,
      "message": "Russell,\nThank you for your contribution to FD.io/VPP.  However, stable/2406 branch is not supported and the branch is effectively closed as there is no CI support to verify fixes on it.\n\nStandard practice is first commit fixes to the master branch, then cherry-pick them as needed to current stable/\u003crelease\u003e branches.  The VPP project policy supports master plus the previous two release branches.\n\nPlease verify this anomaly exists on master and if necessary submit a fix on that branch.",
      "revId": "3bc8b64a670f7d9ff762c40ba97ecc4850247919",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ab81b4de_ae0f34a0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 3285
      },
      "writtenOn": "2026-01-06T00:33:10Z",
      "side": 1,
      "message": "Got it, I will test against master and then update this.",
      "revId": "3bc8b64a670f7d9ff762c40ba97ecc4850247919",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9242046c_9cfb5ed8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 3285
      },
      "writtenOn": "2026-01-07T00:37:42Z",
      "side": 1,
      "message": "I\u0027ve verified that on the latest master branch we are still seeing the crash during periodic restarts of our dataplane agent.\n\nBuilt from master/HEAD at https://github.com/FDio/vpp/commit/7f4eb6d42dc1deef7b64de2af666aee639ae76fa\n\n```\nvpp# show version\nvpp v26.02-rc0~457-g7f4eb6d42 built by root on buildkitsandbox at 2026-01-06T22:48:48\n```\n\n```\nThread 1 \"vpp_main\" received signal SIGSEGV, Segmentation fault.\nvl_mem_api_can_send (q\u003d0x0) at /root/vpp/src/vlibapi/memory_shared.c:781\n781     in /root/vpp/src/vlibapi/memory_shared.c\n```",
      "revId": "3bc8b64a670f7d9ff762c40ba97ecc4850247919",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9813a2f6_b0906e15",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 3285
      },
      "writtenOn": "2026-01-07T15:48:34Z",
      "side": 1,
      "message": "The patch that we\u0027ve submitted isn\u0027t a long term fix for this from our findings so far.  Looking further up the call stack to where the vl_mem_api_can_send is being called.",
      "revId": "3bc8b64a670f7d9ff762c40ba97ecc4850247919",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dd25b890_2ab59f53",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 10
      },
      "writtenOn": "2026-01-07T17:19:05Z",
      "side": 1,
      "message": "Ok, please abandon this change once you\u0027ve pushed a fix to master.\n\nIt would also be good to discuss this issue on vpp-dev@lists.fd.io and/or join the next VPP Community meeting if you want interactive feedback.",
      "parentUuid": "9813a2f6_b0906e15",
      "revId": "3bc8b64a670f7d9ff762c40ba97ecc4850247919",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "83693b78_ee5cf763",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 10
      },
      "writtenOn": "2026-01-07T17:19:05Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "9242046c_9cfb5ed8",
      "revId": "3bc8b64a670f7d9ff762c40ba97ecc4850247919",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    }
  ]
}