{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "446a9cad_e0859c28",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 845
      },
      "writtenOn": "2025-12-17T09:13:10Z",
      "side": 1,
      "message": "Two things:\n- First you really have two changes in one, raw IP packet support and dispatch trace filter. You probably should separate them in different gerrit patches, espacially given that they are very loosely coupled (if at all)\n- Wrt raw IP packet support, the \"guessing\" method is fun, but I wonder if we couldn\u0027t have a more \"structured\" approach here (where basically we know in advance upon calling the trace filter function if it is L2 or L3...) Thoughts about why this would be impossible?",
      "revId": "107498a18d968491c85def1adae56e3741a458f8",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3695f772_6d138ad0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 3121
      },
      "writtenOn": "2025-12-17T21:34:49Z",
      "side": 1,
      "message": "1) Yes, these are two separate changes. I have split them:\n--\u003e dispatch trace filter - https://gerrit.fd.io/r/c/vpp/+/44464 (new patch)\n--\u003e raw IP packet support - https://gerrit.fd.io/r/c/vpp/+/44452 (this patch)\n\n2) I think that\u0027s possible! One option is to add a parameter to the filter function signature to indicate whether the packet is L2 or L3. The caller already has this context, so it can explicitly pass the layer information to the filter. This would update the `vlib_is_packet_traced_fn_t` API. I will try implementing this approach and see how it goes.",
      "parentUuid": "446a9cad_e0859c28",
      "revId": "107498a18d968491c85def1adae56e3741a458f8",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3360547a_6476c5f3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 3121
      },
      "writtenOn": "2025-12-18T01:04:45Z",
      "side": 1,
      "message": "Ran into an issue with the above idea. The trace filter is applied at device input nodes (L2). IP nodes (L3) only add trace data via `vlib_add_trace()`, they don\u0027t call `vlib_trace_buffer()` directly. So, the above approach of changing the API won\u0027t work. Instead, we can use the `VNET_BUFFER_F_L2_HDR_OFFSET_VALID` flag that VPP already maintains.",
      "parentUuid": "3695f772_6d138ad0",
      "revId": "107498a18d968491c85def1adae56e3741a458f8",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    }
  ],
  "submitRequirementResults": [
    {
      "submitRequirement": {
        "name": "Code-Review",
        "description": {
          "value": "A maximum vote is required for the \u0027Code-Review\u0027 label.                         A minumum vote is blocking."
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Code-Review\u003dMAX AND -label:Code-Review\u003dMIN"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Code-Review=MAX AND -label:Code-Review=MIN"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Code-Review=MAX","label:Code-Review=MIN"]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "107498a18d968491c85def1adae56e3741a458f8",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Verified",
        "description": {
          "value": "A maximum \u0027Verified\u0027 vote is required for the \u0027Verified\u0027 label. A minimum vote is blocking."
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Verified\u003dMAX AND -label:Verified\u003dMIN"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Verified=MAX AND -label:Verified=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Verified=MAX"],"failingAtoms":["label:Verified=MIN"]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "107498a18d968491c85def1adae56e3741a458f8",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    }
  ]
}