From 39272e0a1c227b1ab9360e6fbcbc497eaaed4cb0 Mon Sep 17 00:00:00 2001
From: John Lo <loj@cisco.com>
Date: Fri, 26 Feb 2016 12:45:55 -0500
Subject: [PATCH 1/2] Fix link bonding PMD slave status polling path used by
 ENIC driver,

---
 drivers/net/bonding/rte_eth_bond_pmd.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/drivers/net/bonding/rte_eth_bond_pmd.c b/drivers/net/bonding/rte_eth_bond_pmd.c
index b1373c6..9efd73c 100644
--- a/drivers/net/bonding/rte_eth_bond_pmd.c
+++ b/drivers/net/bonding/rte_eth_bond_pmd.c
@@ -1734,7 +1734,7 @@ bond_ethdev_slave_link_status_change_monitor(void *cb_arg)
 
 	if (!bonded_ethdev->data->dev_started ||
 		!internals->link_status_polling_enabled)
-		return;
+		goto rearm_and_exit;
 
 	/* If device is currently being configured then don't check slaves link
 	 * status, wait until next period */
@@ -1768,6 +1768,7 @@ bond_ethdev_slave_link_status_change_monitor(void *cb_arg)
 		rte_spinlock_unlock(&internals->lock);
 	}
 
+ rearm_and_exit:
 	if (polling_slave_found)
 		/* Set alarm to continue monitoring link status of slave ethdev's */
 		rte_eal_alarm_set(internals->link_status_polling_interval_ms * 1000,
-- 
1.9.1

