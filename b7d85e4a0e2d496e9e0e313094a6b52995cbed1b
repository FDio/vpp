{
  "comments": [
    {
      "key": {
        "uuid": "c1a4bf42_46c722a4",
        "filename": "src/plugins/cnat/cnat_node_snat.c",
        "patchSetId": 7
      },
      "lineNbr": 159,
      "author": {
        "id": 361
      },
      "writtenOn": "2021-03-17T17:26:01Z",
      "side": 1,
      "message": "shouldn\u0027t it be clearing VNET_BUFFER_OFFLOAD_F_{IP,UDP,TCP}_CKSUM too?",
      "revId": "b7d85e4a0e2d496e9e0e313094a6b52995cbed1b",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aea99482_2ba95c7e",
        "filename": "src/plugins/cnat/cnat_node_snat.c",
        "patchSetId": 7
      },
      "lineNbr": 159,
      "author": {
        "id": 1632
      },
      "writtenOn": "2021-03-29T09:35:30Z",
      "side": 1,
      "message": "I think we want to keep these set so that the corresponding checksums eventually get recomputed.\nThe VNET_BUFFER_OFFLOAD_F_PARTIAL_CKSUM indicates that the transport checksum contains the checksum the IP pseudo-header, which isn\u0027t true anymore after the NAT, so we clear it.",
      "parentUuid": "c1a4bf42_46c722a4",
      "revId": "b7d85e4a0e2d496e9e0e313094a6b52995cbed1b",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9c00bafd_eb93c67d",
        "filename": "src/plugins/cnat/cnat_node_vip.c",
        "patchSetId": 7
      },
      "lineNbr": 219,
      "author": {
        "id": 361
      },
      "writtenOn": "2021-03-17T17:26:01Z",
      "side": 1,
      "message": "shouldn\u0027t it be clearing VNET_BUFFER_OFFLOAD_F_{IP,UDP,TCP}_CKSUM too?",
      "revId": "b7d85e4a0e2d496e9e0e313094a6b52995cbed1b",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d4c7146b_ea37c943",
        "filename": "src/plugins/cnat/cnat_node_vip.c",
        "patchSetId": 7
      },
      "lineNbr": 219,
      "author": {
        "id": 1632
      },
      "writtenOn": "2021-03-29T09:35:30Z",
      "side": 1,
      "message": "Same as before.",
      "parentUuid": "9c00bafd_eb93c67d",
      "revId": "b7d85e4a0e2d496e9e0e313094a6b52995cbed1b",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c66f3f35_4298f991",
        "filename": "src/vnet/devices/af_packet/node.c",
        "patchSetId": 7
      },
      "lineNbr": 136,
      "author": {
        "id": 361
      },
      "writtenOn": "2021-03-17T17:26:01Z",
      "side": 1,
      "message": "is it needed anymore? I think we do not need to reset checksum?\n(same comment for others below)",
      "revId": "b7d85e4a0e2d496e9e0e313094a6b52995cbed1b",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bc32098a_dfedca38",
        "filename": "src/vnet/devices/virtio/vhost_user_output.c",
        "patchSetId": 7
      },
      "lineNbr": 262,
      "author": {
        "id": 680
      },
      "writtenOn": "2021-03-29T18:21:42Z",
      "side": 1,
      "message": "If psh_cksum \u003d\u003d 0, do we not need to set udp-\u003echecksum \u003d psh_cksum?\nWhat if ip4_pseudo_header_cksum returns the value of 0 in the statement few lines above here?",
      "revId": "b7d85e4a0e2d496e9e0e313094a6b52995cbed1b",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2cda9390_bb667eae",
        "filename": "src/vnet/ip/ip_psh_cksum.h",
        "patchSetId": 7
      },
      "lineNbr": 45,
      "author": {
        "id": 361
      },
      "writtenOn": "2021-03-17T17:26:01Z",
      "side": 1,
      "message": "I suspect this could be costly because we are writing data in small chunks into psh (2x 32-bits + 1x 8-bit + 1x 16-bits) and will be reading it as 256-bits in ip_csum(). This will prevent store-forwarding and block the pipeline.\nIf this becomes performance sensitive, we might want to change that.\nSome for v6 below.",
      "revId": "b7d85e4a0e2d496e9e0e313094a6b52995cbed1b",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    }
  ]
}