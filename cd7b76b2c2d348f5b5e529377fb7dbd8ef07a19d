{
  "comments": [
    {
      "key": {
        "uuid": "d68276ad_42d6a042",
        "filename": "src/plugins/nat/nat.c",
        "patchSetId": 2
      },
      "lineNbr": 2159,
      "author": {
        "id": 123
      },
      "writtenOn": "2019-01-22T12:32:35Z",
      "side": 1,
      "message": "can\u0027t simply rewrite value, should be used by another outside interface, there is outside_fib-\u003erefcount",
      "revId": "cd7b76b2c2d348f5b5e529377fb7dbd8ef07a19d",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "09eaabae_3c1af4b3",
        "filename": "src/plugins/nat/nat.c",
        "patchSetId": 2
      },
      "lineNbr": 2159,
      "author": {
        "id": 1282
      },
      "writtenOn": "2019-01-22T16:20:56Z",
      "side": 1,
      "message": "static void\nsnat_update_outside_fib (u32 new_fib_index, u32 old_fib_index)\n{\n  snat_main_t *sm \u003d \u0026snat_main;\n  nat_outside_fib_t *outside_fib;\n  u8 is_add \u003d 0;\n\n  vec_foreach (outside_fib, sm-\u003eoutside_fibs)\n  {\n    if (outside_fib-\u003efib_index \u003d\u003d old_fib_index)\n      {\n\tif (outside_fib-\u003erefcount \u003d\u003d 1)\n\t  outside_fib-\u003efib_index \u003d new_fib_index;\n\telse {\n          is_add \u003d 1;\n          outside_fib-\u003erefcount--;\n\t  goto cecking_new_fib_index;\n\t}\n      }\n  }\n\ncecking_new_fib_index:\n  vec_foreach (outside_fib, sm-\u003eoutside_fibs)\n  {\n    if (outside_fib-\u003efib_index \u003d\u003d new_fib_index)\n      {\n\toutside_fib-\u003erefcount++;\n\tis_add \u003d 0;\n\tbreak;\n      }\n  }\n\n  if (is_add) {\n    vec_add2 (sm-\u003eoutside_fibs, outside_fib, 1);\n    outside_fib-\u003erefcount \u003d 1;\n    outside_fib-\u003efib_index \u003d new_fib_index;\n  }\n}",
      "parentUuid": "d68276ad_42d6a042",
      "revId": "cd7b76b2c2d348f5b5e529377fb7dbd8ef07a19d",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    }
  ]
}