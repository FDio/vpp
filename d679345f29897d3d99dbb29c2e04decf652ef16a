{
  "comments": [
    {
      "key": {
        "uuid": "6fbb9b7c_f4f9fec5",
        "filename": "src/svm/message_queue.c",
        "patchSetId": 1
      },
      "lineNbr": 137,
      "author": {
        "id": 193
      },
      "writtenOn": "2019-12-27T05:05:13Z",
      "side": 1,
      "message": "This seems unrelated to the subject of the patch. Could you remove it and if need be send a separate patch?\n\nAny idea about the state of queue vs the ctrl ring? That is, was the ring full but the queue not?",
      "range": {
        "startLine": 137,
        "startChar": 1,
        "endLine": 137,
        "endChar": 31
      },
      "revId": "d679345f29897d3d99dbb29c2e04decf652ef16a",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f8d4ab5d_c8663d81",
        "filename": "src/svm/message_queue.c",
        "patchSetId": 1
      },
      "lineNbr": 137,
      "author": {
        "id": 1269
      },
      "writtenOn": "2019-12-27T05:40:26Z",
      "side": 1,
      "message": "This is the problem I mentioned to you, and when Nginx blocks here, both the queue and the ring is empty. We may still figure out why this case comes, but this fix is very useful for us to re-check in case the signal is not delivered well.",
      "parentUuid": "6fbb9b7c_f4f9fec5",
      "range": {
        "startLine": 137,
        "startChar": 1,
        "endLine": 137,
        "endChar": 31
      },
      "revId": "d679345f29897d3d99dbb29c2e04decf652ef16a",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4df984aa_97ee28b6",
        "filename": "src/svm/message_queue.c",
        "patchSetId": 1
      },
      "lineNbr": 137,
      "author": {
        "id": 193
      },
      "writtenOn": "2019-12-27T06:33:16Z",
      "side": 1,
      "message": "Yup, let\u0027s try to fix this separately. I suspect the ring is full but the queue is not. The queue broadcasts only if the queue is full, not the ring ...",
      "parentUuid": "f8d4ab5d_c8663d81",
      "range": {
        "startLine": 137,
        "startChar": 1,
        "endLine": 137,
        "endChar": 31
      },
      "revId": "d679345f29897d3d99dbb29c2e04decf652ef16a",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f55c62f2_6b3d9b00",
        "filename": "src/vnet/tcp/tcp_input.c",
        "patchSetId": 1
      },
      "lineNbr": 2371,
      "author": {
        "id": 193
      },
      "writtenOn": "2019-12-27T05:05:13Z",
      "side": 1,
      "message": "Use tcp_buffer_hdr instead. This way, when we add support for ip options, we only have to change tcp_input.",
      "range": {
        "startLine": 2371,
        "startChar": 6,
        "endLine": 2371,
        "endChar": 47
      },
      "revId": "d679345f29897d3d99dbb29c2e04decf652ef16a",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "966395ce_8c06a01e",
        "filename": "src/vnet/tcp/tcp_input.c",
        "patchSetId": 1
      },
      "lineNbr": 2371,
      "author": {
        "id": 1269
      },
      "writtenOn": "2019-12-27T05:40:26Z",
      "side": 1,
      "message": "actually I refer tcp_lookup_connection. :)",
      "parentUuid": "f55c62f2_6b3d9b00",
      "range": {
        "startLine": 2371,
        "startChar": 6,
        "endLine": 2371,
        "endChar": 47
      },
      "revId": "d679345f29897d3d99dbb29c2e04decf652ef16a",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b8453c3c_e89d367e",
        "filename": "src/vnet/tcp/tcp_input.c",
        "patchSetId": 1
      },
      "lineNbr": 2371,
      "author": {
        "id": 193
      },
      "writtenOn": "2019-12-27T06:33:16Z",
      "side": 1,
      "message": "Ouch. Fair enough :-) \n\nStill, we should slowly clean these out in preparation for the day when somebody asks about ip4 options ... :/",
      "parentUuid": "966395ce_8c06a01e",
      "range": {
        "startLine": 2371,
        "startChar": 6,
        "endLine": 2371,
        "endChar": 47
      },
      "revId": "d679345f29897d3d99dbb29c2e04decf652ef16a",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4e4fbf50_98c74294",
        "filename": "src/vnet/tcp/tcp_input.c",
        "patchSetId": 1
      },
      "lineNbr": 2385,
      "author": {
        "id": 193
      },
      "writtenOn": "2019-12-27T05:05:13Z",
      "side": 1,
      "message": "Maybe not the best practice, but throughput tcp/session layer/vcl we use 0 as NULL. For consistency, let\u0027s stick to that.",
      "range": {
        "startLine": 2385,
        "startChar": 25,
        "endLine": 2385,
        "endChar": 29
      },
      "revId": "d679345f29897d3d99dbb29c2e04decf652ef16a",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "92c57b61_4fd1fe0a",
        "filename": "src/vnet/tcp/tcp_input.c",
        "patchSetId": 1
      },
      "lineNbr": 2385,
      "author": {
        "id": 1269
      },
      "writtenOn": "2019-12-27T05:40:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4e4fbf50_98c74294",
      "range": {
        "startLine": 2385,
        "startChar": 25,
        "endLine": 2385,
        "endChar": 29
      },
      "revId": "d679345f29897d3d99dbb29c2e04decf652ef16a",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "562efe13_db4a70fa",
        "filename": "src/vnet/tcp/tcp_input.c",
        "patchSetId": 1
      },
      "lineNbr": 2390,
      "author": {
        "id": 193
      },
      "writtenOn": "2019-12-27T05:05:13Z",
      "side": 1,
      "message": "Same here.",
      "range": {
        "startLine": 2390,
        "startChar": 11,
        "endLine": 2390,
        "endChar": 15
      },
      "revId": "d679345f29897d3d99dbb29c2e04decf652ef16a",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5dd7d500_6bfcf669",
        "filename": "src/vnet/tcp/tcp_input.c",
        "patchSetId": 1
      },
      "lineNbr": 2390,
      "author": {
        "id": 1269
      },
      "writtenOn": "2019-12-27T05:40:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "562efe13_db4a70fa",
      "range": {
        "startLine": 2390,
        "startChar": 11,
        "endLine": 2390,
        "endChar": 15
      },
      "revId": "d679345f29897d3d99dbb29c2e04decf652ef16a",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "15b546e0_0db8d752",
        "filename": "src/vnet/tcp/tcp_input.c",
        "patchSetId": 1
      },
      "lineNbr": 3245,
      "author": {
        "id": 193
      },
      "writtenOn": "2019-12-27T05:05:13Z",
      "side": 1,
      "message": "You can handle this in the branch at line 3194. You can also move the test on line 3235 there. It saves 2 more ifs on the \u0027normal accept\u0027 path and it consolidates all the \u0027exception\u0027 logic in one place.",
      "range": {
        "startLine": 3241,
        "startChar": 0,
        "endLine": 3245,
        "endChar": 2
      },
      "revId": "d679345f29897d3d99dbb29c2e04decf652ef16a",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9f7abfd1_0dec59dd",
        "filename": "src/vnet/tcp/tcp_input.c",
        "patchSetId": 1
      },
      "lineNbr": 3245,
      "author": {
        "id": 1269
      },
      "writtenOn": "2019-12-27T05:40:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "15b546e0_0db8d752",
      "range": {
        "startLine": 3241,
        "startChar": 0,
        "endLine": 3245,
        "endChar": 2
      },
      "revId": "d679345f29897d3d99dbb29c2e04decf652ef16a",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    }
  ]
}