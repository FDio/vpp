{
  "comments": [
    {
      "key": {
        "uuid": "2910c1a5_7f8f4035",
        "filename": "src/svm/fifo_segment.c",
        "patchSetId": 4
      },
      "lineNbr": 480,
      "author": {
        "id": 1561
      },
      "writtenOn": "2020-02-04T02:07:05Z",
      "side": 0,
      "message": "Does this change (removal of these lines) mean that the fs_try_alloc_fifo would just give up the fifo-allocation if the allocation of a single chunk with the min_size failed?\nSo, if the min_size is 8KB but 8KB-chunk allocation failed, it wouldn\u0027t attempt to allocate fifo with 2 x 4KB. Right?",
      "range": {
        "startLine": 478,
        "startChar": 0,
        "endLine": 480,
        "endChar": 0
      },
      "revId": "b80bc9897185bead9a3931c601a8c5c3b833e098",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8b4c0c04_e3f81afc",
        "filename": "src/svm/fifo_segment.c",
        "patchSetId": 4
      },
      "lineNbr": 480,
      "author": {
        "id": 193
      },
      "writtenOn": "2020-02-04T02:53:44Z",
      "side": 0,
      "message": "Yes. If we plan to allow large initial sizes, then we should probably bring that back in. I do plan a more significant cleanup in this area but only after we have something stable.",
      "parentUuid": "2910c1a5_7f8f4035",
      "range": {
        "startLine": 478,
        "startChar": 0,
        "endLine": 480,
        "endChar": 0
      },
      "revId": "b80bc9897185bead9a3931c601a8c5c3b833e098",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "525d67d6_ae400a4f",
        "filename": "src/svm/fifo_segment.c",
        "patchSetId": 4
      },
      "lineNbr": 480,
      "author": {
        "id": 1561
      },
      "writtenOn": "2020-02-04T03:22:23Z",
      "side": 0,
      "message": "All right. Thanks!",
      "parentUuid": "8b4c0c04_e3f81afc",
      "range": {
        "startLine": 478,
        "startChar": 0,
        "endLine": 480,
        "endChar": 0
      },
      "revId": "b80bc9897185bead9a3931c601a8c5c3b833e098",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1410fd19_ff07ef22",
        "filename": "src/svm/fifo_segment.c",
        "patchSetId": 4
      },
      "lineNbr": 480,
      "author": {
        "id": 193
      },
      "writtenOn": "2020-02-04T04:47:54Z",
      "side": 0,
      "message": "So, should we start preparing to merge 23974, 24086, 24278 (has some comments) and 24735? That is, if we merge those and provide them to MCBU, could you provide a version your library that would work with the resulting image? I\u0027d like to test these before we cherry-pick them, to make sure we\u0027re not blocking the rest of the testing.",
      "parentUuid": "525d67d6_ae400a4f",
      "range": {
        "startLine": 478,
        "startChar": 0,
        "endLine": 480,
        "endChar": 0
      },
      "revId": "b80bc9897185bead9a3931c601a8c5c3b833e098",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "619cfd48_8be3541e",
        "filename": "src/svm/fifo_segment.c",
        "patchSetId": 4
      },
      "lineNbr": 480,
      "author": {
        "id": 1561
      },
      "writtenOn": "2020-02-04T07:50:27Z",
      "side": 0,
      "message": "Sorry for delay of response.\nPreparing to merge these patches sounds good to me. But I have something no clear to me, so let me ask.\nI suppose MCBU team would test if we provide the un-merged patches and the library. But what exactly do you mean by \"your library\"?",
      "parentUuid": "1410fd19_ff07ef22",
      "range": {
        "startLine": 478,
        "startChar": 0,
        "endLine": 480,
        "endChar": 0
      },
      "revId": "b80bc9897185bead9a3931c601a8c5c3b833e098",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c61632b1_55ed61cb",
        "filename": "src/svm/fifo_segment.c",
        "patchSetId": 4
      },
      "lineNbr": 480,
      "author": {
        "id": 193
      },
      "writtenOn": "2020-02-04T15:42:11Z",
      "side": 0,
      "message": "MCBU keep their own branch so they\u0027re separated from vpp master. As long as we provide them something to cherry-pick they can integrated it and build a new image. \n\nAnd apologies, I should\u0027ve said \"your proxy application\".",
      "parentUuid": "619cfd48_8be3541e",
      "range": {
        "startLine": 478,
        "startChar": 0,
        "endLine": 480,
        "endChar": 0
      },
      "revId": "b80bc9897185bead9a3931c601a8c5c3b833e098",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a99e93f8_f98a6927",
        "filename": "src/svm/fifo_segment.c",
        "patchSetId": 4
      },
      "lineNbr": 480,
      "author": {
        "id": 1561
      },
      "writtenOn": "2020-02-04T23:48:04Z",
      "side": 0,
      "message": "Hi Florin,\n\nThanks for explanation.\n\nI recognized that *the proxy application* is the combination of the mutually-depending CUSP (built by MCBU) binaries and CUSP-proxy (built by OWM) binaries.\n\nIn the case, I suppose the steps would be something as following:\n\n  1. MCBU tentatively merges 4 private patches into MCBU\u0027s VPP branch (for CUSP build).\n  2. MCBU builds CUSP upon this VPP branch (which is patched by 4 private patches).\n  3. MCBU provides the tentative CUSP library to OWM.\n  4. OWM syncs OWM\u0027s VPP sources to MCBU\u0027s branch (for CUSP build).\n  5. OWM builds CUSP-proxy upon the sync\u0027d VPP branch and the tentative CUSP library.\n  6. OWM provides the tentative CUSP-proxy to MCBU.\n  7. Each of MCBU and OWM can test the tentative application (CUSP + CUSP-proxy).\n\nIs my view same as yours?",
      "parentUuid": "c61632b1_55ed61cb",
      "range": {
        "startLine": 478,
        "startChar": 0,
        "endLine": 480,
        "endChar": 0
      },
      "revId": "b80bc9897185bead9a3931c601a8c5c3b833e098",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c9a0941e_a8f95e24",
        "filename": "src/svm/fifo_segment.c",
        "patchSetId": 4
      },
      "lineNbr": 480,
      "author": {
        "id": 193
      },
      "writtenOn": "2020-02-05T00:52:31Z",
      "side": 0,
      "message": "Hi Shibuya-san, \n\nYes. \n\nI\u0027m not sure about the specifics, especially after we started sharing a repo that has all of the cherry-picks. But the idea would be that both MCBU and OWM add the 4 patches onto branches derived out of the shared repo, exchange those binaries and then both sides can start testing.",
      "parentUuid": "a99e93f8_f98a6927",
      "range": {
        "startLine": 478,
        "startChar": 0,
        "endLine": 480,
        "endChar": 0
      },
      "revId": "b80bc9897185bead9a3931c601a8c5c3b833e098",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "57647ddf_0e1fb833",
        "filename": "src/svm/fifo_segment.c",
        "patchSetId": 4
      },
      "lineNbr": 480,
      "author": {
        "id": 1561
      },
      "writtenOn": "2020-02-05T01:02:40Z",
      "side": 0,
      "message": "Thanks!\n\nI don\u0027t think further update on 4 patches are needed currently. How about you? -- I suppose your answer would depend on the test you are running now.\n\nWhen you would feel happy with the latest patches, it would be the time to freeze the patches (for a while, at least) and ask MCBU to merge them.",
      "parentUuid": "c9a0941e_a8f95e24",
      "range": {
        "startLine": 478,
        "startChar": 0,
        "endLine": 480,
        "endChar": 0
      },
      "revId": "b80bc9897185bead9a3931c601a8c5c3b833e098",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9c246e42_da7ee3b6",
        "filename": "src/svm/fifo_segment.c",
        "patchSetId": 4
      },
      "lineNbr": 480,
      "author": {
        "id": 193
      },
      "writtenOn": "2020-02-05T01:52:12Z",
      "side": 0,
      "message": "I had a comment on https://gerrit.fd.io/r/c/vpp/+/24278 . Could you check that?\n\nI\u0027m pretty convinced cpu consumption has increased in my high throughput testing, i.e., at 37Gbps, although it may be partly driven by more rx/tx losses. But we can accept that for now, unless we see it worsen in cusp testing.\n\nNot sure when these patches will be cherry-picked, but once we get confirmation that they work properly, I do plan to get them merged into vpp master. At that point, I\u0027d like do a bit of cleaning in the fifo-segment and, if possible, some optimizations. There\u0027s also an ask to have the segment manager be numa aware. \n\nIn parallel, we also need to figure out a way to minimize fifo segment overhead.",
      "parentUuid": "57647ddf_0e1fb833",
      "range": {
        "startLine": 478,
        "startChar": 0,
        "endLine": 480,
        "endChar": 0
      },
      "revId": "b80bc9897185bead9a3931c601a8c5c3b833e098",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    }
  ]
}