{
  "comments": [
    {
      "key": {
        "uuid": "5a2585a7_caba220a",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 43,
      "author": {
        "id": 9
      },
      "writtenOn": "2016-12-01T00:03:57Z",
      "side": 1,
      "message": "We are in process on removing dependency on dpdk for vnet and vlib.",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 43,
        "endChar": 71
      },
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_caeea2b4",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1198,
      "author": {
        "id": 7
      },
      "writtenOn": "2016-12-01T00:03:23Z",
      "side": 1,
      "message": "Hmmm. Doesn\u0027t inspire confidence.",
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_aa2b56ea",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1357,
      "author": {
        "id": 7
      },
      "writtenOn": "2016-12-01T00:03:23Z",
      "side": 1,
      "message": "CLIB_CACHE_LINE_BYTES, please",
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_6a356e45",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1446,
      "author": {
        "id": 7
      },
      "writtenOn": "2016-12-01T00:03:23Z",
      "side": 1,
      "message": "vm-\u003ecpu_index instead of os_get_cpu_number()?",
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_e502b1b3",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1446,
      "author": {
        "id": 109
      },
      "writtenOn": "2016-12-01T08:12:36Z",
      "side": 1,
      "message": "Tell me if that makes sense, most accesses to stuff that is within vhost_cpu_t are for vectors (which pointer is in vhost_cpu_t). I guessed there might be instructions to access \"element in array based on pointer at some location\". But probably not if we add one additional level of lookup (by storing the cpu_number).\nNow, given that those internal vectors have fixed size, I should probably just hard-code the array size and make cpu-structure bigger.\nWhat do you think ?",
      "parentUuid": "5a2585a7_6a356e45",
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_4a3ab237",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1479,
      "author": {
        "id": 7
      },
      "writtenOn": "2016-12-01T00:03:23Z",
      "side": 1,
      "message": "256 forever and ever, or should this be a #define?",
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_a52ca94b",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1479,
      "author": {
        "id": 109
      },
      "writtenOn": "2016-12-01T08:12:36Z",
      "side": 1,
      "message": "Does not matter much. It really is \"discard up to 256 packets\", we are going to discard more during the next lookup anyway. And this value is not used anywere else (It is not the vector length). But I set that to some macro.",
      "parentUuid": "5a2585a7_4a3ab237",
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_8a3c1a95",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1510,
      "author": {
        "id": 9
      },
      "writtenOn": "2016-12-01T00:03:57Z",
      "side": 1,
      "message": "please don\u0027t use C++ comments. I know that they are used in the code already, but we agreed on sticking to gnu coding standards and we should convert them...",
      "range": {
        "startLine": 1508,
        "startChar": 3,
        "endLine": 1510,
        "endChar": 58
      },
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_051dbd0f",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1510,
      "author": {
        "id": 109
      },
      "writtenOn": "2016-12-01T08:12:36Z",
      "side": 1,
      "message": "If you say so. I didn\u0027t really cared reading and remembering the GNU coding style actually.",
      "parentUuid": "5a2585a7_8a3c1a95",
      "range": {
        "startLine": 1508,
        "startChar": 3,
        "endLine": 1510,
        "endChar": 58
      },
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_85f3ed72",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1510,
      "author": {
        "id": 9
      },
      "writtenOn": "2016-12-01T14:15:36Z",
      "side": 1,
      "message": "This doesn\u0027t have anything with gnu coding style. C comments are only /* */. C++ comments can also be //.",
      "parentUuid": "5a2585a7_051dbd0f",
      "range": {
        "startLine": 1508,
        "startChar": 3,
        "endLine": 1510,
        "endChar": 58
      },
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_ea6b9e83",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1529,
      "author": {
        "id": 9
      },
      "writtenOn": "2016-12-01T00:03:57Z",
      "side": 1,
      "message": "vec_reset_lenght",
      "range": {
        "startLine": 1529,
        "startChar": 2,
        "endLine": 1529,
        "endChar": 27
      },
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_e5199123",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1529,
      "author": {
        "id": 109
      },
      "writtenOn": "2016-12-01T08:12:36Z",
      "side": 1,
      "message": "vec_reset_length checks whether the vector is NULL or not. I do not need to do that.",
      "parentUuid": "5a2585a7_ea6b9e83",
      "range": {
        "startLine": 1529,
        "startChar": 2,
        "endLine": 1529,
        "endChar": 27
      },
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_65e8017d",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1529,
      "author": {
        "id": 9
      },
      "writtenOn": "2016-12-01T14:15:36Z",
      "side": 1,
      "message": "Checking null is good practice. Please use it.",
      "parentUuid": "5a2585a7_e5199123",
      "range": {
        "startLine": 1529,
        "startChar": 2,
        "endLine": 1529,
        "endChar": 27
      },
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_8a177aa3",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1543,
      "author": {
        "id": 7
      },
      "writtenOn": "2016-12-01T00:03:23Z",
      "side": 1,
      "message": "The compiler will probably help you [and anyone reading the code will be happier!] if you add a variable n_rx_buffers_left or some such, and avoid (especially) cpu-\u003erx_buffers[--_vec_len(cpu-\u003erx_buffers)];\n\nOr, let p \u003d cpu-\u003erx_buffers + _vec_len(cpu-\u003erx_buffers) - 1, use it, and decrement it.",
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_a5d38937",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1543,
      "author": {
        "id": 109
      },
      "writtenOn": "2016-12-01T08:12:36Z",
      "side": 1,
      "message": "Ok.",
      "parentUuid": "5a2585a7_8a177aa3",
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_2a264617",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1552,
      "author": {
        "id": 7
      },
      "writtenOn": "2016-12-01T00:03:23Z",
      "side": 1,
      "message": "You know this is correct, and I know this is correct but for God\u0027s sake take it easy on someone trying to understand the code.\n\nIt reminds me of a joke: what do you get if you ask a pig to mate with \u003cxxx\u003e? Nothing, there are some things that even a pig won\u0027t do.\n\nJust don\u0027t go there...",
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_85d88d54",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1552,
      "author": {
        "id": 109
      },
      "writtenOn": "2016-12-01T08:12:36Z",
      "side": 1,
      "message": "For God\u0027s sake I guess you are absolutly right !",
      "parentUuid": "5a2585a7_2a264617",
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_0a238a06",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1561,
      "author": {
        "id": 7
      },
      "writtenOn": "2016-12-01T00:03:23Z",
      "side": 1,
      "message": "See above",
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_65dda142",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1561,
      "author": {
        "id": 109
      },
      "writtenOn": "2016-12-01T08:12:36Z",
      "side": 1,
      "message": "ack",
      "parentUuid": "5a2585a7_0a238a06",
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_6a41ee0a",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1575,
      "author": {
        "id": 9
      },
      "writtenOn": "2016-12-01T00:03:57Z",
      "side": 1,
      "message": "see comment above. DPDK tx function is responsible for filling rte_mbuf based on vlib_buffer_t metadata.",
      "range": {
        "startLine": 1572,
        "startChar": 0,
        "endLine": 1575,
        "endChar": 6
      },
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_45e2a504",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1575,
      "author": {
        "id": 109
      },
      "writtenOn": "2016-12-01T08:12:36Z",
      "side": 1,
      "message": "Ok. It seems to me it failed when I didn\u0027t have this there.\nBut I will try again.",
      "parentUuid": "5a2585a7_6a41ee0a",
      "range": {
        "startLine": 1572,
        "startChar": 0,
        "endLine": 1575,
        "endChar": 6
      },
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_ea1f1eb6",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1635,
      "author": {
        "id": 7
      },
      "writtenOn": "2016-12-01T00:03:23Z",
      "side": 1,
      "message": "Uuuuh, the comment doesn\u0027t inspire confidence...",
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_25e79914",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1635,
      "author": {
        "id": 109
      },
      "writtenOn": "2016-12-01T08:12:36Z",
      "side": 1,
      "message": "That\u0027s what the VHOST_USER_INPUT_MAX_BUFFERS_PER_PACKET macro is for. It is an assumption on the number of buffers a packet will consume.\nI guess we could make it 32 and fail when receiving a packet which size is over 64k. But that\u0027s probably not very safe...\nI guess the solution will be to have a PREDICT_FALSE check of that.",
      "parentUuid": "5a2585a7_ea1f1eb6",
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_ca68e289",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1647,
      "author": {
        "id": 9
      },
      "writtenOn": "2016-12-01T00:03:57Z",
      "side": 1,
      "message": "please don\u0027t use _vec_len. It is internal macro.",
      "range": {
        "startLine": 1647,
        "startChar": 38,
        "endLine": 1647,
        "endChar": 46
      },
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_05e49d0b",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1647,
      "author": {
        "id": 109
      },
      "writtenOn": "2016-12-01T08:12:36Z",
      "side": 1,
      "message": "It doesn\u0027t check if the vector is null or not.",
      "parentUuid": "5a2585a7_ca68e289",
      "range": {
        "startLine": 1647,
        "startChar": 38,
        "endLine": 1647,
        "endChar": 46
      },
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_aa0596c3",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1720,
      "author": {
        "id": 9
      },
      "writtenOn": "2016-12-01T00:03:57Z",
      "side": 1,
      "message": "How API client is going to be notified if this happens?",
      "range": {
        "startLine": 1714,
        "startChar": 0,
        "endLine": 1720,
        "endChar": 5
      },
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_e5f071cb",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1720,
      "author": {
        "id": 109
      },
      "writtenOn": "2016-12-01T08:12:36Z",
      "side": 1,
      "message": "I am open to suggestions.",
      "parentUuid": "5a2585a7_aa0596c3",
      "range": {
        "startLine": 1714,
        "startChar": 0,
        "endLine": 1720,
        "endChar": 5
      },
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_aa5eb6e7",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1849,
      "author": {
        "id": 9
      },
      "writtenOn": "2016-12-01T00:03:57Z",
      "side": 1,
      "message": "please use macro, cacheline on some platoforms can be different size",
      "range": {
        "startLine": 1849,
        "startChar": 39,
        "endLine": 1849,
        "endChar": 41
      },
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_c5ed75f1",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1849,
      "author": {
        "id": 109
      },
      "writtenOn": "2016-12-01T08:12:36Z",
      "side": 1,
      "message": "Actually, this is the minimum frame size, not the cache line size.",
      "parentUuid": "5a2585a7_aa5eb6e7",
      "range": {
        "startLine": 1849,
        "startChar": 39,
        "endLine": 1849,
        "endChar": 41
      },
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_45ed058b",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1849,
      "author": {
        "id": 9
      },
      "writtenOn": "2016-12-01T14:15:36Z",
      "side": 1,
      "message": "CLIB_PREFETCH works with cachelines, parameter can only be multiple of cacheline size.",
      "parentUuid": "5a2585a7_c5ed75f1",
      "range": {
        "startLine": 1849,
        "startChar": 39,
        "endLine": 1849,
        "endChar": 41
      },
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_4a5d12e9",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1889,
      "author": {
        "id": 9
      },
      "writtenOn": "2016-12-01T00:03:57Z",
      "side": 1,
      "message": "please use cpu_index as it was used before.",
      "range": {
        "startLine": 1889,
        "startChar": 32,
        "endLine": 1889,
        "endChar": 52
      },
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_ca1c62c4",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1906,
      "author": {
        "id": 7
      },
      "writtenOn": "2016-12-01T00:03:23Z",
      "side": 1,
      "message": "vm-\u003ecpu_index?",
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_2a72c67c",
        "filename": "vnet/vnet/devices/virtio/vhost-user.c",
        "patchSetId": 1
      },
      "lineNbr": 1912,
      "author": {
        "id": 9
      },
      "writtenOn": "2016-12-01T00:03:57Z",
      "side": 1,
      "message": "Please use vec_reset_length(). _vec_len is internal macro...",
      "range": {
        "startLine": 1912,
        "startChar": 2,
        "endLine": 1912,
        "endChar": 10
      },
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2585a7_2af8867b",
        "filename": "vnet/vnet/devices/virtio/vhost-user.h",
        "patchSetId": 1
      },
      "lineNbr": 269,
      "author": {
        "id": 7
      },
      "writtenOn": "2016-12-01T00:03:23Z",
      "side": 1,
      "message": "I think doxygen expects /*\u003c The interface ... */ to document the qid member, etc.",
      "revId": "1fb2c39e8c74c2447476d622586cd2092591ae82",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    }
  ]
}