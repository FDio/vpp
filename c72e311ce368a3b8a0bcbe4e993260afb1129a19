{
  "comments": [
    {
      "key": {
        "uuid": "da141535_37db2f1d",
        "filename": "vnet/vnet/vxlan-gpe/vxlan_gpe.c",
        "patchSetId": 3
      },
      "lineNbr": 339,
      "author": {
        "id": 7
      },
      "writtenOn": "2016-05-31T11:14:36Z",
      "side": 1,
      "message": "As soon as you pool_put t, it\u0027s not OK to look at it in encap.c. What is the actual issue here? Multi-thread misbehavior?",
      "revId": "c72e311ce368a3b8a0bcbe4e993260afb1129a19",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da141535_d2b081df",
        "filename": "vnet/vnet/vxlan-gpe/vxlan_gpe.c",
        "patchSetId": 3
      },
      "lineNbr": 339,
      "author": {
        "id": 278
      },
      "writtenOn": "2016-05-31T19:00:00Z",
      "side": 1,
      "message": "He\u0027s just copied this from the regular vxlan node which did the same thing. It covers the case that a packet is sent on a deconfigured interface; if it happens to look at its tunnel config then there\u0027s a valid no-op rewriter there. I imagine it was considered cheap insurance on the part of the original author.\n\nThe encap path then does this as soon as it works out what \"t0\" is:\n\t  /* Check rewrite string and drop packet if tunnel is deleted */\n\t  if (PREDICT_FALSE(t0-\u003erewrite \u003d\u003d vxlan4_dummy_rewrite || \n                            t0-\u003erewrite \u003d\u003d vxlan6_dummy_rewrite))",
      "parentUuid": "da141535_37db2f1d",
      "revId": "c72e311ce368a3b8a0bcbe4e993260afb1129a19",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba092121_78ff8102",
        "filename": "vnet/vnet/vxlan-gpe/vxlan_gpe.c",
        "patchSetId": 3
      },
      "lineNbr": 339,
      "author": {
        "id": 352
      },
      "writtenOn": "2016-06-02T02:36:56Z",
      "side": 1,
      "message": "Agree with Chris. When a packet is doing encap, the tunnel is deleted, which causes uncertain behavior. The code here could make sure encap behavior in a certain way.",
      "parentUuid": "da141535_d2b081df",
      "revId": "c72e311ce368a3b8a0bcbe4e993260afb1129a19",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    }
  ]
}