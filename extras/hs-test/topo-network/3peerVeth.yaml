---
devices:
  - name: "hst_ns_client"
    type: "netns"

  - name: "hst_ns_server"
    type: "netns"

  - name: "hst_ns_bridge"
    type: "netns"

  - name: "hst_client"
    type: "veth"
    netns: "hst_ns_bridge"
    peer:
      name: "hst_peer_client"
      netns: "hst_ns_client"
      ip4:
        network: 1

  - name: "hst_proxy"
    type: "veth"
    peer:
      name: "hst_peer_proxy"
      netns: "hst_ns_bridge"

  - name: "hst_server"
    type: "veth"
    netns: "hst_ns_bridge"
    peer:
      name: "hst_peer_server"
      netns: "hst_ns_server"
      ip4:
        network: 1

  - name: "br"
    type: "bridge"
    netns: "hst_ns_bridge"
    interfaces:
      - hst_client
      - hst_peer_proxy
      - hst_server

