{
  "comments": [
    {
      "key": {
        "uuid": "484ebe94_d09b8d8b",
        "filename": "src/vnet/ipsec/ipsec_spd_policy.c",
        "patchSetId": 2
      },
      "lineNbr": 170,
      "author": {
        "id": 2465
      },
      "writtenOn": "2022-05-16T17:15:23Z",
      "side": 1,
      "message": "We also are adding inbound policies to fast path here, and since fast path lookup is only implemented on outbound side, we can \"lose\" inbound policies in the fast path, that we\u0027re unable to match.\n\nUntil then I think there needs to be some additional check to only add outbound policies to fast path.",
      "revId": "19ae5708ee1116307ea65135b99723e64fe0b01e",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "91ab22d2_93bb07de",
        "filename": "src/vnet/ipsec/ipsec_spd_policy.c",
        "patchSetId": 2
      },
      "lineNbr": 170,
      "author": {
        "id": 1854
      },
      "writtenOn": "2022-05-18T15:48:55Z",
      "side": 1,
      "message": "You are right. I\u0027ll correct that.",
      "parentUuid": "484ebe94_d09b8d8b",
      "revId": "19ae5708ee1116307ea65135b99723e64fe0b01e",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "33369255_00ba986d",
        "filename": "src/vnet/ipsec/ipsec_spd_policy.c",
        "patchSetId": 2
      },
      "lineNbr": 332,
      "author": {
        "id": 2465
      },
      "writtenOn": "2022-05-16T17:15:23Z",
      "side": 1,
      "message": "Would this be clearer as\n```\nif (PREDICT_TRUE ((policy-\u003eprotocol \u003d\u003d IP_PROTOCOL_TCP) || \n                 (policy-\u003eprotocol \u003d\u003d IP_PROTOCOL_UDP) || \n                 (policy-\u003eprotocol \u003d\u003d IP_PROTOCOL_SCTP))\n```\n?",
      "revId": "19ae5708ee1116307ea65135b99723e64fe0b01e",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ad50c45a_6b14e79e",
        "filename": "src/vnet/ipsec/ipsec_spd_policy.c",
        "patchSetId": 2
      },
      "lineNbr": 332,
      "author": {
        "id": 1854
      },
      "writtenOn": "2022-05-18T15:48:55Z",
      "side": 1,
      "message": "You are right, I\u0027ll correct that.",
      "parentUuid": "33369255_00ba986d",
      "revId": "19ae5708ee1116307ea65135b99723e64fe0b01e",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "42975916_d6f68ff5",
        "filename": "src/vnet/ipsec/ipsec_spd_policy.c",
        "patchSetId": 2
      },
      "lineNbr": 368,
      "author": {
        "id": 2465
      },
      "writtenOn": "2022-05-16T17:15:23Z",
      "side": 1,
      "message": "How come we\u0027re re-using the flow cache number of buckets here instead of im-\u003efp_lookup_hash_buckets? Flow cache sizing is not really applicable here (flow cache doesn\u0027t use bihash and is sized for 1 million flows at 0.25 load).",
      "revId": "19ae5708ee1116307ea65135b99723e64fe0b01e",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5fdcf17e_24d57c88",
        "filename": "src/vnet/ipsec/ipsec_spd_policy.c",
        "patchSetId": 2
      },
      "lineNbr": 368,
      "author": {
        "id": 1854
      },
      "writtenOn": "2022-05-18T15:48:55Z",
      "side": 1,
      "message": "I\u0027ve discussed the issue with Fan we will use im-\u003efp_lookup_hash_buckets value for both ipv4 and ipv6 implementations.",
      "parentUuid": "42975916_d6f68ff5",
      "revId": "19ae5708ee1116307ea65135b99723e64fe0b01e",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    }
  ]
}