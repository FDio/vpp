{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "5a4a93da_b2ec990b",
        "filename": "src/plugins/auto_sdl/auto_sdl.c",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 193
      },
      "writtenOn": "2026-01-24T19:21:47Z",
      "side": 1,
      "message": "What exactly is the issue here? We removed appns from st-\u003eappns_index and didn\u0027t free the vector?",
      "revId": "95a1825e24bc65c097964c2bc04389faa807bff4",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2e80c347_d374b5c9",
        "filename": "src/plugins/auto_sdl/auto_sdl.c",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 3291
      },
      "writtenOn": "2026-01-25T10:27:00Z",
      "side": 1,
      "message": "Not a removal case.\nst-\u003eappns_index can be NULL/empty when the session table is created directly by FIB (e.g., auto_sdl mapping with explicit fib_index - (session_table_get_or_alloc)) without going through appns setup. The guard just avoids dereferencing an empty vector and uses the default appns for that path.\n\nso basically our assumption of default ns can be wrong as there is no ns assigned, so explicitly assign the default ns.",
      "parentUuid": "5a4a93da_b2ec990b",
      "revId": "95a1825e24bc65c097964c2bc04389faa807bff4",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "11f36b57_c8f12017",
        "filename": "src/plugins/auto_sdl/auto_sdl.c",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 193
      },
      "writtenOn": "2026-01-25T22:40:27Z",
      "side": 1,
      "message": "That vector should be just 0/NULL, for it to be initialized and empty would mean we\u0027ve added an appns and then removed it. If the latter happens, we just need to be sure we free it when we remove the last appns. Let\u0027s see what Steven thinks since he\u0027s closer to the code.",
      "parentUuid": "2e80c347_d374b5c9",
      "revId": "95a1825e24bc65c097964c2bc04389faa807bff4",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4caf7d72_1800f039",
        "filename": "src/plugins/auto_sdl/auto_sdl.c",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 3291
      },
      "writtenOn": "2026-01-26T10:44:14Z",
      "side": 1,
      "message": "Yeah, sorry for confusion, I mean Null only, as I was crashing at \"vec_elt_at_index (st-\u003eappns_index, 0)\".\nThe st created using explicit fib has no path for assigning appns and hence its null.",
      "parentUuid": "11f36b57_c8f12017",
      "revId": "95a1825e24bc65c097964c2bc04389faa807bff4",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9df536c8_328d0d6c",
        "filename": "src/plugins/auto_sdl/auto_sdl.c",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 680
      },
      "writtenOn": "2026-01-26T16:55:03Z",
      "side": 1,
      "message": "Can you provide the full calling chain to session_table_get_or_alloc from auto_sdl which st-\u003eappns_index was not set up and requiring this fix?",
      "parentUuid": "4caf7d72_1800f039",
      "revId": "95a1825e24bc65c097964c2bc04389faa807bff4",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "31600cd9_ed3e4f3d",
        "filename": "src/plugins/auto_sdl/auto_sdl.c",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 3291
      },
      "writtenOn": "2026-01-27T17:00:08Z",
      "side": 1,
      "message": "→ session_stream_accept\n              → session_lookup_add_connection\n                -\u003e session_table_get_or_alloc_for_connection\n                  -\u003e session_table_get_or_alloc\n                    -\u003e session_table_alloc\n                      -\u003e (session table is allocated)",
      "parentUuid": "9df536c8_328d0d6c",
      "revId": "95a1825e24bc65c097964c2bc04389faa807bff4",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "79f7e470_ccf0a3d1",
        "filename": "src/vnet/session/session_lookup.c",
        "patchSetId": 1
      },
      "lineNbr": 1476,
      "author": {
        "id": 193
      },
      "writtenOn": "2026-01-24T19:21:47Z",
      "side": 1,
      "message": "What exactly is failing because this is not set? We can work with the assumption that if st-\u003eappns_index is not set, table implicitly belongs to default ns.",
      "revId": "95a1825e24bc65c097964c2bc04389faa807bff4",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1cf1455e_70200638",
        "filename": "src/vnet/session/session_lookup.c",
        "patchSetId": 1
      },
      "lineNbr": 1476,
      "author": {
        "id": 3291
      },
      "writtenOn": "2026-01-25T10:27:00Z",
      "side": 1,
      "message": "Again same reason that when session table is being created directly by FIB (e.g., explicit fib_index path), st-\u003eappns_index can be NULL/empty because the table wasn’t created via appns setup. In that case, appns‑based APIs/dumps/cleanup that rely on st-\u003eappns_index won’t associate the table with any namespace, hence thought to explicitly assign default ns to session table.",
      "parentUuid": "79f7e470_ccf0a3d1",
      "revId": "95a1825e24bc65c097964c2bc04389faa807bff4",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2c243e5d_f8e8ff62",
        "filename": "src/vnet/session/session_lookup.c",
        "patchSetId": 1
      },
      "lineNbr": 1476,
      "author": {
        "id": 193
      },
      "writtenOn": "2026-01-25T22:40:27Z",
      "side": 1,
      "message": "All depends on how we want to interpret uninitialized st-\u003eappns_index, which for now means default appns. Let\u0027s see how we solve the other comment.",
      "parentUuid": "1cf1455e_70200638",
      "revId": "95a1825e24bc65c097964c2bc04389faa807bff4",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "99cf66a5_c7af9ed1",
        "filename": "src/vnet/session/session_lookup.c",
        "patchSetId": 1
      },
      "lineNbr": 1476,
      "author": {
        "id": 680
      },
      "writtenOn": "2026-01-26T17:47:59Z",
      "side": 1,
      "message": "Is it cleaner and better to remove this change here and just add the line vec_add1 to the changes in auto_sdl that you were changing?",
      "parentUuid": "2c243e5d_f8e8ff62",
      "revId": "95a1825e24bc65c097964c2bc04389faa807bff4",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8aa7d338_e559de8c",
        "filename": "src/vnet/session/session_lookup.c",
        "patchSetId": 1
      },
      "lineNbr": 1476,
      "author": {
        "id": 3291
      },
      "writtenOn": "2026-01-28T03:00:54Z",
      "side": 1,
      "message": "will update",
      "parentUuid": "99cf66a5_c7af9ed1",
      "revId": "95a1825e24bc65c097964c2bc04389faa807bff4",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c83f6f37_85d731d0",
        "filename": "src/vnet/session/session_sdl.c",
        "patchSetId": 1
      },
      "lineNbr": 634,
      "author": {
        "id": 193
      },
      "writtenOn": "2026-01-24T19:21:47Z",
      "side": 1,
      "message": "Instead of all of these fib checks, why not change fib_index retrieval on 677 and 686, i.e., if fib_index provided and app_ns is default, use fib provided instead of retrieving from app_ns.",
      "revId": "95a1825e24bc65c097964c2bc04389faa807bff4",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "99b1ca57_ae2d7183",
        "filename": "src/vnet/session/session_sdl.c",
        "patchSetId": 1
      },
      "lineNbr": 634,
      "author": {
        "id": 3291
      },
      "writtenOn": "2026-01-25T10:27:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c83f6f37_85d731d0",
      "revId": "95a1825e24bc65c097964c2bc04389faa807bff4",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    }
  ]
}