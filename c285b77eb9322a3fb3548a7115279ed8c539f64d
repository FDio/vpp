{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "9ec652e1_46616b1e",
        "filename": "src/vpp/app/dump_metrics.c",
        "patchSetId": 1
      },
      "lineNbr": 146,
      "author": {
        "id": 3296
      },
      "writtenOn": "2026-02-16T12:47:34Z",
      "side": 1,
      "message": "Even if we exclude only this character, the backward incompatibility is still there because `isalnum` is still applied to the 2nd token of the 4-way tuple variant, and it was not there before.\n\nTo a customer using PCI IDs for example, the metrics are still changing name. For example, having a look at my exported metric list, I see another metric name impacted.\n\n```\n# Before\n/nodes/pci_0002:01:00.2-process/vectors\n\n# With these changes\n/nodes/pci_0002_01_00_2-process/vectors\n```\n\nOr interfaces with VLAN naming are also impacted:\n\n```\n# Before\ninterfaces_drops{interface\u003d\"MultiGigaEthernet0_1.100\",index\u003d\"0\",thread\u003d\"0\"} 0\n\n# With these changes\ninterfaces_drops{interface\u003d\"MultiGigaEthernet0_1_100\",index\u003d\"0\",thread\u003d\"0\"} 0\n```\n\nI would still challenge the base assumption: what are we trying to achieve? enforcing that prometheus only sees `[a-zA-Z0-9_-]` because it cannot accept other values? or something else?\n\nIf consistent output validation is the goal, my proposal would be to make a explicit sanitization of the 2nd token only instead of piggybacking on this existing generic method.",
      "revId": "c285b77eb9322a3fb3548a7115279ed8c539f64d",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ef3c8b1b_1dcd89bc",
        "filename": "src/vpp/app/dump_metrics.c",
        "patchSetId": 1
      },
      "lineNbr": 306,
      "author": {
        "id": 3296
      },
      "writtenOn": "2026-02-16T12:47:34Z",
      "side": 1,
      "message": "I know this is out of scope in CL but as to the consistency reasoning these changes seek, shouldn\u0027t this sanitization of the 2nd token in a 4-way tuple variant also happen here?",
      "revId": "c285b77eb9322a3fb3548a7115279ed8c539f64d",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    }
  ]
}