{
  "comments": [
    {
      "key": {
        "uuid": "4348ac80_cf9f2824",
        "filename": "src/plugins/l3xc/l3xc.h",
        "patchSetId": 4
      },
      "lineNbr": 35,
      "author": {
        "id": 9
      },
      "writtenOn": "2019-05-30T09:17:04Z",
      "side": 1,
      "message": "Isn\u0027t this just waste of memory? It makes struct 2 times bigger than data in it if I counted correctly...",
      "range": {
        "startLine": 35,
        "startChar": 0,
        "endLine": 35,
        "endChar": 42
      },
      "revId": "234753016f3028ca8a561b4b77f78ac6263af3cb",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "672e0029_231f69a3",
        "filename": "src/plugins/l3xc/l3xc.h",
        "patchSetId": 4
      },
      "lineNbr": 35,
      "author": {
        "id": 267
      },
      "writtenOn": "2019-06-04T10:21:28Z",
      "side": 1,
      "message": "it means the struct is guaranteed to occupy only one cache line, so at most 1 miss at switch time. i also fix the pool_get.",
      "parentUuid": "4348ac80_cf9f2824",
      "range": {
        "startLine": 35,
        "startChar": 0,
        "endLine": 35,
        "endChar": 42
      },
      "revId": "234753016f3028ca8a561b4b77f78ac6263af3cb",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4328290d_9b8ca95d",
        "filename": "src/plugins/l3xc/l3xc.h",
        "patchSetId": 4
      },
      "lineNbr": 35,
      "author": {
        "id": 9
      },
      "writtenOn": "2019-06-04T16:59:27Z",
      "side": 1,
      "message": "CLIB_CACHE_LINE_ALIGN_MARK doesn\u0027t guarantee that data will occupy only one cacheline of data, if you have 65 bytes of real data, it will be 2 cachelines.\n\nThis structure, if I counted correctly is 32 bytes, so it is natural fit for two-in-one-cacheline. You will save 50% o memory, reduce cache usage and there will be no drawbacks.\nGenerally for read only data,  it makes sense to me to compress as much as possible to reduce cache utilisation.\nIf data is updated by dataplane code, it must be cacheline aligned to avoid false sharing.\n\nBut at the end, not big deal. If you want to leave it as it is, I will be glad to press the button.",
      "parentUuid": "672e0029_231f69a3",
      "range": {
        "startLine": 35,
        "startChar": 0,
        "endLine": 35,
        "endChar": 42
      },
      "revId": "234753016f3028ca8a561b4b77f78ac6263af3cb",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "638d3f12_11cb452f",
        "filename": "src/plugins/l3xc/l3xc.h",
        "patchSetId": 4
      },
      "lineNbr": 104,
      "author": {
        "id": 9
      },
      "writtenOn": "2019-05-30T09:17:04Z",
      "side": 1,
      "message": "Can you use l3xc_main_t and put your externs there, to reduce number of exported symbols?",
      "range": {
        "startLine": 104,
        "startChar": 0,
        "endLine": 104,
        "endChar": 25
      },
      "revId": "234753016f3028ca8a561b4b77f78ac6263af3cb",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4147ea85_00bf14f8",
        "filename": "src/plugins/l3xc/l3xc.h",
        "patchSetId": 4
      },
      "lineNbr": 104,
      "author": {
        "id": 267
      },
      "writtenOn": "2019-06-03T16:03:49Z",
      "side": 1,
      "message": "it\u0027s the only exported symbol, a main symbol wouldn\u0027t reduce the number.",
      "parentUuid": "638d3f12_11cb452f",
      "range": {
        "startLine": 104,
        "startChar": 0,
        "endLine": 104,
        "endChar": 25
      },
      "revId": "234753016f3028ca8a561b4b77f78ac6263af3cb",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7d229105_73553a8a",
        "filename": "src/plugins/l3xc/l3xc.h",
        "patchSetId": 4
      },
      "lineNbr": 104,
      "author": {
        "id": 9
      },
      "writtenOn": "2019-06-04T07:50:03Z",
      "side": 1,
      "message": "I can see 2:\n\nextern fib_node_type_t l3xc_fib_node_type;\nextern l3xc_t *l3xc_pool;",
      "parentUuid": "4147ea85_00bf14f8",
      "range": {
        "startLine": 104,
        "startChar": 0,
        "endLine": 104,
        "endChar": 25
      },
      "revId": "234753016f3028ca8a561b4b77f78ac6263af3cb",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "593ef103_bdf2c115",
        "filename": "src/plugins/l3xc/l3xc.h",
        "patchSetId": 4
      },
      "lineNbr": 104,
      "author": {
        "id": 267
      },
      "writtenOn": "2019-06-04T10:21:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4147ea85_00bf14f8",
      "range": {
        "startLine": 104,
        "startChar": 0,
        "endLine": 104,
        "endChar": 25
      },
      "revId": "234753016f3028ca8a561b4b77f78ac6263af3cb",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7b683d80_b31afbf9",
        "filename": "src/plugins/l3xc/l3xc_node.c",
        "patchSetId": 4
      },
      "lineNbr": 128,
      "author": {
        "id": 9
      },
      "writtenOn": "2019-05-30T09:17:04Z",
      "side": 1,
      "message": "if (PREDICT_FALSE((node-\u003eflags \u0026 VLIB_NODE_FLAG_TRACE)))\n  {\n\n  }\n\n?",
      "range": {
        "startLine": 97,
        "startChar": 0,
        "endLine": 128,
        "endChar": 2
      },
      "revId": "234753016f3028ca8a561b4b77f78ac6263af3cb",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bd5d7ed2_40ff8a5f",
        "filename": "src/plugins/l3xc/l3xc_node.c",
        "patchSetId": 4
      },
      "lineNbr": 128,
      "author": {
        "id": 267
      },
      "writtenOn": "2019-06-03T16:03:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7b683d80_b31afbf9",
      "range": {
        "startLine": 97,
        "startChar": 0,
        "endLine": 128,
        "endChar": 2
      },
      "revId": "234753016f3028ca8a561b4b77f78ac6263af3cb",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    }
  ]
}