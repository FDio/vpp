{
  "comments": [
    {
      "key": {
        "uuid": "42fa9748_29b3d706",
        "filename": "test/test_ipsec_tun_if_esp.py",
        "patchSetId": 2
      },
      "lineNbr": 143,
      "author": {
        "id": 1496
      },
      "writtenOn": "2020-03-26T11:24:47Z",
      "side": 1,
      "message": "Isn\u0027t this valid only for the first packet? Subsequent packets are (4500,Y) https://tools.ietf.org/html/rfc3947#section-4",
      "range": {
        "startLine": 142,
        "startChar": 0,
        "endLine": 143,
        "endChar": 54
      },
      "revId": "5aaaed130b6d3d86af9f614e28417dc28d664964",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "95054bb3_a4226996",
        "filename": "test/test_ipsec_tun_if_esp.py",
        "patchSetId": 2
      },
      "lineNbr": 143,
      "author": {
        "id": 267
      },
      "writtenOn": "2020-03-26T13:04:59Z",
      "side": 1,
      "message": "IIUC that RFC refers to IKE signalling not IPSec packets.",
      "parentUuid": "42fa9748_29b3d706",
      "range": {
        "startLine": 142,
        "startChar": 0,
        "endLine": 143,
        "endChar": 54
      },
      "revId": "5aaaed130b6d3d86af9f614e28417dc28d664964",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "05df7015_c80804ed",
        "filename": "test/test_ipsec_tun_if_esp.py",
        "patchSetId": 2
      },
      "lineNbr": 143,
      "author": {
        "id": 1388
      },
      "writtenOn": "2020-03-26T13:46:39Z",
      "side": 1,
      "message": "I think ports would be rewritten if there was a working NAT device in the middle but in this test, there\u0027s no one.",
      "parentUuid": "95054bb3_a4226996",
      "range": {
        "startLine": 142,
        "startChar": 0,
        "endLine": 143,
        "endChar": 54
      },
      "revId": "5aaaed130b6d3d86af9f614e28417dc28d664964",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5edb6a2d_4ff52886",
        "filename": "test/test_ipsec_tun_if_esp.py",
        "patchSetId": 2
      },
      "lineNbr": 143,
      "author": {
        "id": 1496
      },
      "writtenOn": "2020-03-26T16:16:49Z",
      "side": 1,
      "message": "@Neale, it is the same for UDP encaps.  https://tools.ietf.org/html/rfc3948#section-5.2\n@Alex, yes.  That was my point, I guess it wasn\u0027t clear.  Do we need a case where we test (4500, Y).\n\nI don\u0027t have a strong opinion (no -1), I was just pointing out that there is an alternate topology that we (probably?) support where there is a nat device in path between 2 devices, that might also need to be tested?\n\nPaul",
      "parentUuid": "05df7015_c80804ed",
      "range": {
        "startLine": 142,
        "startChar": 0,
        "endLine": 143,
        "endChar": 54
      },
      "revId": "5aaaed130b6d3d86af9f614e28417dc28d664964",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1a56e43b_2f074aef",
        "filename": "test/test_ipsec_tun_if_esp.py",
        "patchSetId": 2
      },
      "lineNbr": 143,
      "author": {
        "id": 1388
      },
      "writtenOn": "2020-03-31T08:32:57Z",
      "side": 1,
      "message": "The goal of this test is to cover the fix in the patch, namely that UDP encapsulation doesn\u0027t generate corrupted headers in transport mode for certain crypto algorithms.\n\nIt seems to me that a test where UDP encapsulation is tested with a working NAT device in the middle is more of a system test, not a unit-test. But still, it would be good to have one.\n\nI looked into the code to find a way to set a destination port in the UDP header to able be to send ESP packets encapsulated with UDP(4500,Y) and didn\u0027t find anything. Therefore, the test with an actual NAT device wouldn\u0027t work and further patches will be needed.",
      "parentUuid": "5edb6a2d_4ff52886",
      "range": {
        "startLine": 142,
        "startChar": 0,
        "endLine": 143,
        "endChar": 54
      },
      "revId": "5aaaed130b6d3d86af9f614e28417dc28d664964",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "406dad4a_44087e90",
        "filename": "test/test_ipsec_tun_if_esp.py",
        "patchSetId": 2
      },
      "lineNbr": 143,
      "author": {
        "id": 267
      },
      "writtenOn": "2020-03-31T09:06:38Z",
      "side": 1,
      "message": "hi Paul,\ni would say we have a feature and test missing to cover the case you mentioned. let\u0027s address that in another patch.",
      "parentUuid": "5edb6a2d_4ff52886",
      "range": {
        "startLine": 142,
        "startChar": 0,
        "endLine": 143,
        "endChar": 54
      },
      "revId": "5aaaed130b6d3d86af9f614e28417dc28d664964",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    }
  ]
}