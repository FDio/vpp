{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "11d0beae_445bcf21",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 241
      },
      "writtenOn": "2024-09-17T17:20:00Z",
      "side": 1,
      "message": "ubuntu@ip-10-0-50-107:~/vpp$ lsb_release -a\nNo LSB modules are available.\nDistributor ID:\tUbuntu\nDescription:\tUbuntu 22.04.3 LTS\nRelease:\t22.04\nCodename:\tjammy\nubuntu@ip-10-0-50-107:~/vpp$ uname -a\nLinux ip-10-0-50-107 6.5.0-1023-aws #23~22.04.1-Ubuntu SMP Fri Jun 21 22:58:06 UTC 2024 aarch64 aarch64 aarch64 GNU/Linux\n\nTest without the change:\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nFAIL: Distributed Virtual Router\n------------------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/ubuntu/vpp/test/test_dvr.py\", line 189, in test_dvr\n    self.assert_same_mac_addr(pkt_tag_to_tag, rx)\n  File \"/home/ubuntu/vpp/test/test_dvr.py\", line 55, in assert_same_mac_addr\n    self.assertEqual(t_eth.src, r_eth.src)\nAssertionError: \u002702:03:00:00:ff:02\u0027 !\u003d \u002702:03:00:00:00:00\u0027\n- 02:03:00:00:ff:02\n?             ^^  ^\n+ 02:03:00:00:00:00\n?             ^^  ^\n\nubuntu@ip-10-0-50-107:~/vpp$ git diff\ndiff --git a/src/vnet/l2/l2_vtr.h b/src/vnet/l2/l2_vtr.h\nindex 1cd920997..b97ae79d5 100644\n--- a/src/vnet/l2/l2_vtr.h\n+++ b/src/vnet/l2/l2_vtr.h\n@@ -85,6 +85,7 @@ l2_vtr_process (vlib_buffer_t * b0, vtr_config_t * config)\n   temp_8 \u003d *((u64 *) eth);\n   temp_4 \u003d *((u32 *) (eth + 8));\n \n+  CLIB_COMPILER_BARRIER ();\n   /* adjust for popped tags */\n   eth +\u003d config-\u003epop_bytes;\n\nAfter adding the above change:\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nDistributed Virtual Router [main thread only]\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nDistributed Virtual Router                                          2.49 OK\n\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nTEST RESULTS:\n    Scheduled tests: 1\n     Executed tests: 1\n       Passed tests: 1\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\nTest run was successful",
      "revId": "2a73f7e5287b018ea7b6a8c1d9ee844d6737a04a",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d46525c4_109464e9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 320
      },
      "writtenOn": "2024-09-17T18:17:36Z",
      "side": 1,
      "message": "verified that this is the minimal change to fix the make test failure.",
      "revId": "2a73f7e5287b018ea7b6a8c1d9ee844d6737a04a",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c24f1b4c_7d04b68f",
        "filename": "src/vnet/l2/l2_vtr.h",
        "patchSetId": 5
      },
      "lineNbr": 89,
      "author": {
        "id": 361
      },
      "writtenOn": "2024-09-18T09:12:16Z",
      "side": 1,
      "message": "I wonder, is it because of some unaligned load issues? Does using (u64u *) and (u32u *) casts fix the issue?",
      "revId": "2a73f7e5287b018ea7b6a8c1d9ee844d6737a04a",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    }
  ]
}