{
  "comments": [
    {
      "key": {
        "uuid": "3a3291f1_c418a677",
        "filename": "src/vnet/ip/ip6.h",
        "patchSetId": 3
      },
      "lineNbr": 453,
      "author": {
        "id": 267
      },
      "writtenOn": "2017-03-05T20:53:06Z",
      "side": 1,
      "message": "why not perform this \u0027find the tcp header\u0027 code whenever the ip-\u003eprotocol is hop-by-hop? hashing correctly on tcp/udp ports is always desired when hop-by-hop options are present and whether or not im-hbh_enabled is present.\n\nif so put this block in the appropriate place in ip6_compute_flow_hash. and remove this function.",
      "revId": "edb946631759a1cfd22584592b936b571068b1cc",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a3291f1_440dd636",
        "filename": "src/vnet/ip/ip6_forward.c",
        "patchSetId": 3
      },
      "lineNbr": 196,
      "author": {
        "id": 267
      },
      "writtenOn": "2017-03-05T20:53:06Z",
      "side": 1,
      "message": "why the check for whether it\u0027s an adj?\nwhen the forwarding chain has load-balancing over multiple levels, e.g.\n\nLB-a\n   | ----\u003eLB-b\n   |            |------\u003e Adj-a\n   |            |------\u003e Adj-b\n   |\n   | ----\u003eLB-c\n   |           |------\u003e Adj-c\n   |           |------\u003e Adj-d\n\nyour changes will mean your new hash algorithm is used when making choices at LB-b and LB-c (in ip6_load_balance()), but not when making a choice at LB-a (in ip6_lookup_inline()).",
      "revId": "edb946631759a1cfd22584592b936b571068b1cc",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a3291f1_e41de267",
        "filename": "src/vnet/ip/ip6_forward.c",
        "patchSetId": 3
      },
      "lineNbr": 955,
      "author": {
        "id": 267
      },
      "writtenOn": "2017-03-05T20:53:06Z",
      "side": 1,
      "message": "the goal here appears to be to have the packets sent to the hop-by-hop node just before they get to the adjacency. this in turn suggests to me two things:\n 1 - hop-by-hop processing does not affect the forwarding result, and therefore\n 2 - should run either as an output feature on the adjacency, or as an input feature. there are local/for-us features now too, if you are interested to processing for-us packets as well as transit.\n\nwhen choosing between input and output/for-us features please consider that there are many outcomes for processing down-stream of this VLIB node - matching an adj is just one possibility. There could also be gre/vxlan/etc tunnel decap, an MPLS label imposition, SR policy, MAP encap/decap/translate. The list is long and will continue to grow. There\u0027s also the multicast forwarding to consider.\n\nwith hop-by-hop processing in a input/output feature, and the hash done correctly always, this whole block can be removed.",
      "revId": "edb946631759a1cfd22584592b936b571068b1cc",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a3291f1_040fce2f",
        "filename": "src/vnet/ip/ip6_forward.c",
        "patchSetId": 3
      },
      "lineNbr": 2810,
      "author": {
        "id": 267
      },
      "writtenOn": "2017-03-05T20:53:06Z",
      "side": 1,
      "message": "what guarantees this union member is still valid this late in the game?",
      "revId": "edb946631759a1cfd22584592b936b571068b1cc",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    }
  ]
}