{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "330882ad_1133b011",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1776
      },
      "writtenOn": "2023-02-01T11:36:13Z",
      "side": 1,
      "message": "Hi Tetsuya. I provided my first review. Main points are: \n\n- we don\u0027t use is_spray anymore. Now we have a policy type and we should use and propagate across the code.\n\n- I propose the following logic for setting the source address for a given policy:\nThe encap_src is optional when creating a new policy. \nIn the dataplane, if the encap_src is defined as part of the policy creation, then we use that encap_src\nif the encap_src is not defined at the time of policy creation, then we use the encap_src defined per node. \n\nThis way we allow users who don\u0027t want to configure an encap_src per policy to configure the encap_src once per node and will be used by all policies. \n ",
      "revId": "34da4196ba3099f7f30f140b4385aa9ac3579f01",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ff37706c_9e805d7c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1970
      },
      "writtenOn": "2023-02-03T18:40:11Z",
      "side": 1,
      "message": "Hi Ahmed,\nI guess you sent your comments to Takeru (not me)... Anyway, I agree with you. The encap source must be an option. only when specifying the encap source upon creating a new policy, this encap source must be used.\n\nHi Takeru,\nPlease double-check if your code is align to the above logic?",
      "parentUuid": "330882ad_1133b011",
      "revId": "34da4196ba3099f7f30f140b4385aa9ac3579f01",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "27ba265d_600bf890",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 2857
      },
      "writtenOn": "2023-02-06T00:51:18Z",
      "side": 1,
      "message": "Hi Ahamed,(Hi Tetsuya thanks for notice)\n\nencap_src is already optional.\nLet\u0027s actually explain.\n\nhttps://gerrit.fd.io/r/c/vpp/+/37863/5/src/vnet/srv6/sr_policy_rewrite.c#387\nthis see it defines Src Addr, which is defined for Node from the beginning.\n\nhttps://gerrit.fd.io/r/c/vpp/+/37863/5/src/vnet/srv6/sr_policy_rewrite.c#406\nAs you can see, it overwrites the input to this function if it\u0027s not NULL.\n\nIn other words, SrcAddr defined for Node is used as the default value.\nI think this logic applies to both CLI and API.\n\nFeel free to comment further if I\u0027m wrong",
      "parentUuid": "ff37706c_9e805d7c",
      "revId": "34da4196ba3099f7f30f140b4385aa9ac3579f01",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4bdc817d_5eb8ab0f",
        "filename": "src/vnet/srv6/sr.api",
        "patchSetId": 4
      },
      "lineNbr": 140,
      "author": {
        "id": 1776
      },
      "writtenOn": "2023-02-01T11:30:10Z",
      "side": 1,
      "message": "rename it to encap_src",
      "revId": "34da4196ba3099f7f30f140b4385aa9ac3579f01",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "253037ae_86293d53",
        "filename": "src/vnet/srv6/sr.api",
        "patchSetId": 4
      },
      "lineNbr": 154,
      "author": {
        "id": 1776
      },
      "writtenOn": "2023-02-01T11:30:10Z",
      "side": 1,
      "message": "same comment for encap_src_v6addr",
      "revId": "34da4196ba3099f7f30f140b4385aa9ac3579f01",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a0428695_3ef08064",
        "filename": "src/vnet/srv6/sr.api",
        "patchSetId": 4
      },
      "lineNbr": 167,
      "author": {
        "id": 1776
      },
      "writtenOn": "2023-02-01T11:30:10Z",
      "side": 1,
      "message": "same comment for encap_src_v6addr",
      "revId": "34da4196ba3099f7f30f140b4385aa9ac3579f01",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a3169b54_0083d4d6",
        "filename": "src/vnet/srv6/sr.api",
        "patchSetId": 4
      },
      "lineNbr": 325,
      "author": {
        "id": 1776
      },
      "writtenOn": "2023-02-01T11:30:10Z",
      "side": 1,
      "message": "we don\u0027t use is_spray anymore. please use type.",
      "revId": "34da4196ba3099f7f30f140b4385aa9ac3579f01",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4e29ed11_4772ccec",
        "filename": "src/vnet/srv6/sr.h",
        "patchSetId": 4
      },
      "lineNbr": 115,
      "author": {
        "id": 1776
      },
      "writtenOn": "2023-02-01T11:30:10Z",
      "side": 1,
      "message": "let\u0027s call it encap_src",
      "revId": "34da4196ba3099f7f30f140b4385aa9ac3579f01",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "274bc152_5c0466a2",
        "filename": "src/vnet/srv6/sr.h",
        "patchSetId": 4
      },
      "lineNbr": 350,
      "author": {
        "id": 1776
      },
      "writtenOn": "2023-02-01T11:30:10Z",
      "side": 1,
      "message": "can we rename it to encap_src instead of encap_src_v6addr. No need for v6addr. It is always v6.",
      "revId": "34da4196ba3099f7f30f140b4385aa9ac3579f01",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "abc0bea3_92f18547",
        "filename": "src/vnet/srv6/sr.h",
        "patchSetId": 4
      },
      "lineNbr": 355,
      "author": {
        "id": 1776
      },
      "writtenOn": "2023-02-01T11:30:10Z",
      "side": 1,
      "message": "same as before.",
      "revId": "34da4196ba3099f7f30f140b4385aa9ac3579f01",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3690b451_ec94edc4",
        "filename": "src/vnet/srv6/sr_api.c",
        "patchSetId": 4
      },
      "lineNbr": 87,
      "author": {
        "id": 1776
      },
      "writtenOn": "2023-02-01T11:30:10Z",
      "side": 1,
      "message": "just encap_src",
      "revId": "34da4196ba3099f7f30f140b4385aa9ac3579f01",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3242f697_b920e3a8",
        "filename": "src/vnet/srv6/sr_api.c",
        "patchSetId": 4
      },
      "lineNbr": 94,
      "author": {
        "id": 1776
      },
      "writtenOn": "2023-02-01T11:30:10Z",
      "side": 1,
      "message": "change is_spray to type.",
      "revId": "34da4196ba3099f7f30f140b4385aa9ac3579f01",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ea79b97a_7d31867e",
        "filename": "src/vnet/srv6/sr_api.c",
        "patchSetId": 4
      },
      "lineNbr": 94,
      "author": {
        "id": 2857
      },
      "writtenOn": "2023-02-03T01:18:43Z",
      "side": 1,
      "message": "The schema of an already Stable API cannot be changed.",
      "parentUuid": "3242f697_b920e3a8",
      "revId": "34da4196ba3099f7f30f140b4385aa9ac3579f01",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "04348226_b7910f4a",
        "filename": "src/vnet/srv6/sr_api.c",
        "patchSetId": 4
      },
      "lineNbr": 121,
      "author": {
        "id": 1776
      },
      "writtenOn": "2023-02-01T11:30:10Z",
      "side": 1,
      "message": "just encap_src",
      "revId": "34da4196ba3099f7f30f140b4385aa9ac3579f01",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6e079fdb_586799eb",
        "filename": "src/vnet/srv6/sr_api.c",
        "patchSetId": 4
      },
      "lineNbr": 138,
      "author": {
        "id": 1776
      },
      "writtenOn": "2023-02-01T11:30:10Z",
      "side": 1,
      "message": "just encap_src",
      "revId": "34da4196ba3099f7f30f140b4385aa9ac3579f01",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1724c881_3b7e9f56",
        "filename": "src/vnet/srv6/sr_api.c",
        "patchSetId": 4
      },
      "lineNbr": 148,
      "author": {
        "id": 1776
      },
      "writtenOn": "2023-02-01T11:30:10Z",
      "side": 1,
      "message": "just encap_src",
      "revId": "34da4196ba3099f7f30f140b4385aa9ac3579f01",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ce172c6a_9d0ee87c",
        "filename": "src/vnet/srv6/sr_api.c",
        "patchSetId": 4
      },
      "lineNbr": 152,
      "author": {
        "id": 1776
      },
      "writtenOn": "2023-02-01T11:30:10Z",
      "side": 1,
      "message": "just encap_src",
      "revId": "34da4196ba3099f7f30f140b4385aa9ac3579f01",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5a7830e4_5ed8b611",
        "filename": "src/vnet/srv6/sr_api.c",
        "patchSetId": 4
      },
      "lineNbr": 156,
      "author": {
        "id": 1776
      },
      "writtenOn": "2023-02-01T11:30:10Z",
      "side": 1,
      "message": "just encap_src and make sure to change in the rest of the code.",
      "revId": "34da4196ba3099f7f30f140b4385aa9ac3579f01",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    }
  ]
}