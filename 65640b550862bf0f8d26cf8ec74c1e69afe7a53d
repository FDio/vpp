{
  "comments": [
    {
      "key": {
        "uuid": "c07ea5db_91fba987",
        "filename": "src/vnet/ipsec/esp_encrypt.c",
        "patchSetId": 2
      },
      "lineNbr": 420,
      "author": {
        "id": 267
      },
      "writtenOn": "2021-01-28T09:32:03Z",
      "side": 1,
      "message": "remove the counter, use the ESP sequence number instead? that create more room in the SA struct.",
      "revId": "65640b550862bf0f8d26cf8ec74c1e69afe7a53d",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "322c68b4_50aa98a5",
        "filename": "src/vnet/ipsec/esp_encrypt.c",
        "patchSetId": 2
      },
      "lineNbr": 420,
      "author": {
        "id": 361
      },
      "writtenOn": "2021-01-28T11:20:27Z",
      "side": 1,
      "message": "but in case of no ESN, it will be 32-bits only. That could be an issue?",
      "parentUuid": "c07ea5db_91fba987",
      "revId": "65640b550862bf0f8d26cf8ec74c1e69afe7a53d",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "31247aee_0b18f1e5",
        "filename": "src/vnet/ipsec/esp_encrypt.c",
        "patchSetId": 2
      },
      "lineNbr": 420,
      "author": {
        "id": 267
      },
      "writtenOn": "2021-01-28T13:17:33Z",
      "side": 1,
      "message": "it would be an issue. in the case of no ESN we don\u0027t add the hi seq to the AAD, but we can still increase it.",
      "parentUuid": "322c68b4_50aa98a5",
      "revId": "65640b550862bf0f8d26cf8ec74c1e69afe7a53d",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "999e249a_c8d21a4d",
        "filename": "src/vnet/ipsec/esp_encrypt.c",
        "patchSetId": 2
      },
      "lineNbr": 420,
      "author": {
        "id": 361
      },
      "writtenOn": "2021-01-29T12:26:49Z",
      "side": 1,
      "message": "we could do that, however it will not help much for the flags: the counter is in the 2nd cacheline, and we already have 8-bytes available there. Flags are in the 1st cacheline but we do not have free space",
      "parentUuid": "31247aee_0b18f1e5",
      "revId": "65640b550862bf0f8d26cf8ec74c1e69afe7a53d",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "36cb8af0_840346a5",
        "filename": "src/vnet/ipsec/esp_encrypt.c",
        "patchSetId": 2
      },
      "lineNbr": 420,
      "author": {
        "id": 267
      },
      "writtenOn": "2021-01-29T12:59:02Z",
      "side": 1,
      "message": "true, i wasn\u0027t paying enough attention. my goal here is not to have bit-fields. perhaps we can swap the 8 byte dpo field with 7 bytes of stuff from the second (salt, protocol, tunnel_flags, dscp) - the dpo is only used for encypt in SPD mode, which is not the perf focus.",
      "parentUuid": "999e249a_c8d21a4d",
      "revId": "65640b550862bf0f8d26cf8ec74c1e69afe7a53d",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "13a7658d_225b7e78",
        "filename": "src/vnet/ipsec/esp_encrypt.c",
        "patchSetId": 2
      },
      "lineNbr": 420,
      "author": {
        "id": 361
      },
      "writtenOn": "2021-02-04T15:15:10Z",
      "side": 1,
      "message": "As you removed a u32 thread_index in the 1st cacheline, I claimed 1-byte from the 4 that was free :)",
      "parentUuid": "36cb8af0_840346a5",
      "revId": "65640b550862bf0f8d26cf8ec74c1e69afe7a53d",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "24817215_2c213422",
        "filename": "test/test_ipsec_esp.py",
        "patchSetId": 2
      },
      "lineNbr": 630,
      "author": {
        "id": 267
      },
      "writtenOn": "2021-01-29T13:05:29Z",
      "side": 1,
      "message": "have a non-zero salt in one of these.",
      "revId": "65640b550862bf0f8d26cf8ec74c1e69afe7a53d",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bc2dce25_0a04512d",
        "filename": "test/test_ipsec_esp.py",
        "patchSetId": 2
      },
      "lineNbr": 630,
      "author": {
        "id": 361
      },
      "writtenOn": "2021-02-04T15:15:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "24817215_2c213422",
      "revId": "65640b550862bf0f8d26cf8ec74c1e69afe7a53d",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    }
  ]
}