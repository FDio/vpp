{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "6c09cbc0_cad2cb46",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 2220
      },
      "writtenOn": "2023-06-02T07:52:16Z",
      "side": 1,
      "message": "Hi Artem,\n\nOut of curiosity, do you observe newly allocated frames with filled scalar_args? Or is it something different?\n\nI\u0027ve observed something similar with TAPv2/virtio interfaces when packets went to \"l2-input\" instead of \"ethernet-input\" node (because of the flag ETH_INPUT_FRAME_F_SINGLE_SW_IF_IDX on the frame). Clearing the flag in `vlib/main.c` helped though.\n\nAlso, I can see that rdma plugin doesn\u0027t add \"no-append\" flag.",
      "revId": "3538c8010b2fa08335f4b0dd74ec44e9a9eb08ea",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5beb724b_1313f805",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 2280
      },
      "writtenOn": "2023-06-02T08:24:55Z",
      "side": 1,
      "message": "Hi Stanislav,\nExactly. \nBut in my case, the packet should be in l2-input, but it doesn\u0027t get there (perhaps also because of the ETH_INPUT_FRAME_F_SINGLE_SW_IF_IDX flag).\n\nWas the flag clearing fix merged? Should it help in this case too?\n\nI would be grateful if there are other recommendations on how to fix this",
      "parentUuid": "6c09cbc0_cad2cb46",
      "revId": "3538c8010b2fa08335f4b0dd74ec44e9a9eb08ea",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4eac72f9_6a89db89",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 2220
      },
      "writtenOn": "2023-06-02T10:59:12Z",
      "side": 1,
      "message": "Yes, it was merged[0] some time ago, it was a bit different case though (virtio didn\u0027t set ETH_INPUT_FRAME_F_SINGLE_SW_IF_IDX but the flags weren\u0027t properly cleared).\n\nYour fix seems to be right one, just wanted to understand a bit the context. We\u0027ll need the same one for the rdma plugin.\n\nI wonder why `vlib_get_new_next_frame` didn\u0027t allocate a new frame...\n\n[0] - https://gerrit.fd.io/r/c/vpp/+/35894",
      "parentUuid": "5beb724b_1313f805",
      "revId": "3538c8010b2fa08335f4b0dd74ec44e9a9eb08ea",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    }
  ]
}