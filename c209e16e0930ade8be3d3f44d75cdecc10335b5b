{
  "comments": [
    {
      "key": {
        "uuid": "a716e01c_77e05def",
        "filename": "src/plugins/wireguard/wireguard_peer.c",
        "patchSetId": 1
      },
      "lineNbr": 151,
      "author": {
        "id": 8
      },
      "writtenOn": "2021-04-28T06:51:31Z",
      "side": 1,
      "message": "It\u0027s useful to set the flow label for the purpose of getting good ECMP in the network.\n(It is also typical of tunnels to support copying of the traffic class / TOS field)\nHere is some code I used in the past:\n  u8 tc \u003d mm-\u003etc_copy ? ip4-\u003etos : mm-\u003etc;\n  u32 vtcfl \u003d 0x6 \u003c\u003c 28;\n  vtcfl |\u003d tc \u003c\u003c 20;\n  vtcfl |\u003d vnet_buffer (p)-\u003eip.flow_hash \u0026 0x000fffff;\n\n  return (clib_host_to_net_u32 (vtcfl));",
      "revId": "c209e16e0930ade8be3d3f44d75cdecc10335b5b",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fe0060a7_fc68b856",
        "filename": "src/plugins/wireguard/wireguard_peer.c",
        "patchSetId": 1
      },
      "lineNbr": 155,
      "author": {
        "id": 8
      },
      "writtenOn": "2021-04-28T06:51:31Z",
      "side": 1,
      "message": "The recommended hop limit is 64.",
      "revId": "c209e16e0930ade8be3d3f44d75cdecc10335b5b",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7bdf9215_587a2466",
        "filename": "src/plugins/wireguard/wireguard_peer.c",
        "patchSetId": 1
      },
      "lineNbr": 258,
      "author": {
        "id": 2280
      },
      "writtenOn": "2021-04-28T13:35:51Z",
      "side": 1,
      "message": "Probably using allowed_ips[0] is a bad idea.",
      "range": {
        "startLine": 258,
        "startChar": 33,
        "endLine": 258,
        "endChar": 58
      },
      "revId": "c209e16e0930ade8be3d3f44d75cdecc10335b5b",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2106adc9_a1de9e36",
        "filename": "src/plugins/wireguard/wireguard_peer.c",
        "patchSetId": 1
      },
      "lineNbr": 258,
      "author": {
        "id": 8
      },
      "writtenOn": "2021-05-05T06:54:08Z",
      "side": 1,
      "message": "You want the address family of the peer here I think?\nSo assuming you have a check somewhere that peer-\u003esrc and peer-\u003edst is of the same AF.\nThen wouldn\u0027t fib_proto_to_link(fib_proto) work?",
      "parentUuid": "7bdf9215_587a2466",
      "range": {
        "startLine": 258,
        "startChar": 33,
        "endLine": 258,
        "endChar": 58
      },
      "revId": "c209e16e0930ade8be3d3f44d75cdecc10335b5b",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    }
  ]
}