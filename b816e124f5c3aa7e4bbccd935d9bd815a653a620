{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "f6e9ecb3_1928d64d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 2220
      },
      "writtenOn": "2023-05-09T07:55:30Z",
      "side": 1,
      "message": "Hello Neale,\nThanks as always for the review and valuable inputs.",
      "revId": "b816e124f5c3aa7e4bbccd935d9bd815a653a620",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3653156a_bc56aef4",
        "filename": "src/vnet/teib/teib.c",
        "patchSetId": 2
      },
      "lineNbr": 143,
      "author": {
        "id": 267
      },
      "writtenOn": "2023-05-10T00:16:28Z",
      "side": 1,
      "message": "you don\u0027t need nh_fib_index here ...",
      "revId": "b816e124f5c3aa7e4bbccd935d9bd815a653a620",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4b74f984_9078183c",
        "filename": "src/vnet/teib/teib.c",
        "patchSetId": 2
      },
      "lineNbr": 143,
      "author": {
        "id": 2220
      },
      "writtenOn": "2023-05-10T09:02:14Z",
      "side": 1,
      "message": "I don\u0027t agree here. It\u0027s the main point of my fix - to provide `fib_table_entry_path_add` with a custom next hop fib index.\n\nBefore the fix - nh-table-id worked for creating /32 adj route, so it was rather a peer-table-id if one could say so. \nAfter the fix - /32 adj route is created in the same table where is the interface. But you can select a fib for the nexthop of the peer. \n\nFor instance - we are using nh-table-id to keep IPIP tunnels inside 0 table while keeping every wan interface in a separate table.",
      "parentUuid": "3653156a_bc56aef4",
      "revId": "b816e124f5c3aa7e4bbccd935d9bd815a653a620",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a45fad21_9503fbc1",
        "filename": "src/vnet/teib/teib.c",
        "patchSetId": 2
      },
      "lineNbr": 143,
      "author": {
        "id": 267
      },
      "writtenOn": "2023-05-21T23:18:48Z",
      "side": 1,
      "message": "fib_table_entry_path_add will ignore the nh_fib_index parameter because the path has an interface.\nWhat your fix has indeed done is separate the FIBs for the overlay and underlay (the peer and nh). This function passes the peer\u0027s FIB, so the /32 adj fib is added in the peer\u0027s FIB. The teib_t has the NH\u0027s FIB so the entry tracked is now the underlay.",
      "parentUuid": "4b74f984_9078183c",
      "revId": "b816e124f5c3aa7e4bbccd935d9bd815a653a620",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9064cc74_dc7d81db",
        "filename": "src/vnet/teib/teib.c",
        "patchSetId": 2
      },
      "lineNbr": 143,
      "author": {
        "id": 2220
      },
      "writtenOn": "2023-05-22T07:28:20Z",
      "side": 1,
      "message": "sorry, it\u0027s me being stupid again. this function only creates /32 adj fib entry, which is later mid-chained to the nexthop in the function `teib_entry_adj_stack` where both te_nh_fib_index and te_nh are passed. now I see.",
      "parentUuid": "a45fad21_9503fbc1",
      "revId": "b816e124f5c3aa7e4bbccd935d9bd815a653a620",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "17c3d973_a803fe35",
        "filename": "src/vnet/teib/teib.c",
        "patchSetId": 2
      },
      "lineNbr": 171,
      "author": {
        "id": 267
      },
      "writtenOn": "2023-05-10T00:16:28Z",
      "side": 1,
      "message": "... nor here.",
      "revId": "b816e124f5c3aa7e4bbccd935d9bd815a653a620",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "804ccfe3_7c001597",
        "filename": "src/vnet/teib/teib.c",
        "patchSetId": 2
      },
      "lineNbr": 171,
      "author": {
        "id": 2220
      },
      "writtenOn": "2023-05-10T09:02:14Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "17c3d973_a803fe35",
      "revId": "b816e124f5c3aa7e4bbccd935d9bd815a653a620",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    }
  ]
}