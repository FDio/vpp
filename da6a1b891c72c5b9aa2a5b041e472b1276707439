{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "e52b6d92_cdf7fe48",
        "filename": "src/vnet/ip/ip6_inlines.h",
        "patchSetId": 1
      },
      "lineNbr": 85,
      "author": {
        "id": 267
      },
      "writtenOn": "2023-08-04T13:26:24Z",
      "side": 1,
      "message": "does this treat a packet with a fragment header as if it contained the TCP header?",
      "revId": "da6a1b891c72c5b9aa2a5b041e472b1276707439",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f9cf29c9_8fead8d8",
        "filename": "src/vnet/ip/ip6_inlines.h",
        "patchSetId": 1
      },
      "lineNbr": 85,
      "author": {
        "id": 361
      },
      "writtenOn": "2023-08-04T14:49:34Z",
      "side": 1,
      "message": "Yes, this is the same behavior as ipv4 flow hash. I considered changing that, but even if we were defaulting to 2-tuple for fragments you still end up with fragmented and non-fragmented packets taking different paths.\nSo if you want consistent path in face of fragmentation, you must configure to 3-tuple flow-hash altogether.",
      "parentUuid": "e52b6d92_cdf7fe48",
      "revId": "da6a1b891c72c5b9aa2a5b041e472b1276707439",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5d103f9d_49be2493",
        "filename": "src/vnet/ip/ip6_inlines.h",
        "patchSetId": 1
      },
      "lineNbr": 85,
      "author": {
        "id": 267
      },
      "writtenOn": "2023-08-08T09:49:07Z",
      "side": 1,
      "message": "Stanislav is proposing a change to the v4 behaviour to use a 3 tuple: https://gerrit.fd.io/r/c/vpp/+/39317\n\nI would propose we are consistent with 4 and 6 and use the 3 tuple. What do you think?",
      "parentUuid": "f9cf29c9_8fead8d8",
      "revId": "da6a1b891c72c5b9aa2a5b041e472b1276707439",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e7547029_96f76ae8",
        "filename": "src/vnet/ip/ip6_inlines.h",
        "patchSetId": 1
      },
      "lineNbr": 85,
      "author": {
        "id": 361
      },
      "writtenOn": "2023-08-08T10:13:28Z",
      "side": 1,
      "message": "I wonder, it still means fragmented packets will use a different path than non-fragmented packets. Preserving fragment ordering is a bit better, but how much better? Anyway, I do not have a strong opinion, but I do agree we want v4 and v6 behaving the same way. So I\u0027ll follow what is decided for v4 :)",
      "parentUuid": "5d103f9d_49be2493",
      "revId": "da6a1b891c72c5b9aa2a5b041e472b1276707439",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "08e0fb4c_9002c9ef",
        "filename": "src/vnet/ip/ip6_inlines.h",
        "patchSetId": 1
      },
      "lineNbr": 85,
      "author": {
        "id": 2220
      },
      "writtenOn": "2023-08-15T11:45:54Z",
      "side": 1,
      "message": "I don\u0027t think we can solve it completely without keeping some state. I suggest to change the behaviour to send all the fragments of 1 packet to the same link. Current ipv4 implementation treats fragments as regular udp/tcp packets (reading some random bytes as ports).\n\nWhat do you think?",
      "parentUuid": "e7547029_96f76ae8",
      "revId": "da6a1b891c72c5b9aa2a5b041e472b1276707439",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2"
    }
  ]
}