{
  "comments": [
    {
      "key": {
        "uuid": "f64fa607_37965d69",
        "filename": "src/vnet/interface/rx_queue.c",
        "patchSetId": 12
      },
      "lineNbr": 88,
      "author": {
        "id": 241
      },
      "writtenOn": "2020-11-25T13:26:55Z",
      "side": 1,
      "message": "it should be queue_index instead of queue_id.",
      "revId": "9df0134f832bd896bdf35099c530246fb22da5ce",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0c362637_8fc52bea",
        "filename": "src/vnet/interface/rx_queue.c",
        "patchSetId": 12
      },
      "lineNbr": 168,
      "author": {
        "id": 241
      },
      "writtenOn": "2020-11-25T11:12:09Z",
      "side": 1,
      "message": "clib_file_main_t *fm \u003d \u0026file_main;",
      "revId": "9df0134f832bd896bdf35099c530246fb22da5ce",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d074855f_922cc8e6",
        "filename": "src/vnet/interface/rx_queue.c",
        "patchSetId": 12
      },
      "lineNbr": 183,
      "author": {
        "id": 241
      },
      "writtenOn": "2020-11-25T11:12:09Z",
      "side": 1,
      "message": "Please remove this check.\nvirtio interface doesn\u0027t register any file index for interrupt mode.",
      "revId": "9df0134f832bd896bdf35099c530246fb22da5ce",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0bdccd02_11097cdc",
        "filename": "src/vnet/interface/rx_queue.c",
        "patchSetId": 12
      },
      "lineNbr": 189,
      "author": {
        "id": 241
      },
      "writtenOn": "2020-11-25T11:12:09Z",
      "side": 1,
      "message": "Please add the following code before calling the \u0027rx_mode_change_function\u0027.\n\n if ((mode \u003d\u003d VNET_HW_IF_RX_MODE_INTERRUPT ||\n         mode \u003d\u003d VNET_HW_IF_RX_MODE_ADAPTIVE) \u0026\u0026 rxq-\u003efile_index !\u003d ~0) \n  {\n    clib_file_t *f \u003d clib_file_get (fm, rxq-\u003efile_index);\n    fm-\u003efile_update (f, UNIX_FILE_UPDATE_ADD);\n  }",
      "revId": "9df0134f832bd896bdf35099c530246fb22da5ce",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b15c1a16_01268650",
        "filename": "src/vnet/interface/rx_queue.c",
        "patchSetId": 12
      },
      "lineNbr": 202,
      "author": {
        "id": 241
      },
      "writtenOn": "2020-11-25T11:12:09Z",
      "side": 1,
      "message": "Please add the following code after calling the \u0027rx_mode_change_function\u0027. \n if (mode \u003d\u003d VNET_HW_IF_RX_MODE_POLLING \u0026\u0026 rxq-\u003efile_index !\u003d ~0)\n  {\n    clib_file_t *f \u003d clib_file_get (fm, rxq-\u003efile_index);\n    fm-\u003efile_update (f, UNIX_FILE_UPDATE_DELETE);\n  }",
      "revId": "9df0134f832bd896bdf35099c530246fb22da5ce",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "be8f8db5_55317c6d",
        "filename": "src/vnet/interface/rx_queue_funcs.h",
        "patchSetId": 12
      },
      "lineNbr": 22,
      "author": {
        "id": 845
      },
      "writtenOn": "2020-11-25T17:08:50Z",
      "side": 1,
      "message": "I am a bit worried about having a \"public\" vnet_hw_if_register_rx_queue function which leaves VPP in an \"incomplete\" state. It would be better imho to have this function as internal to the framework, and maybe add something like vnet_hw_if_register_all_rx_queues which would take all the queue_ids, generate all the queue_indexes at once, and do the update_runtime_data. It\u0027s a bit more complicated but ensures a \"clear\" semantic between the driver and the framework and prevents error such as \"I only half updated the state of vnet and forgot to update_runtime_data\".",
      "range": {
        "startLine": 22,
        "startChar": 4,
        "endLine": 22,
        "endChar": 32
      },
      "revId": "9df0134f832bd896bdf35099c530246fb22da5ce",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ba52cf65_336e9e50",
        "filename": "src/vnet/interface/rx_queue_funcs.h",
        "patchSetId": 12
      },
      "lineNbr": 25,
      "author": {
        "id": 845
      },
      "writtenOn": "2020-11-25T17:08:50Z",
      "side": 1,
      "message": "Same, these functions require an update_runtime_data and shouldn\u0027t be usable from outside the framework (maybe in the future they can be hidden?).",
      "range": {
        "startLine": 24,
        "startChar": 0,
        "endLine": 25,
        "endChar": 78
      },
      "revId": "9df0134f832bd896bdf35099c530246fb22da5ce",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "07bf9d94_d6c8b55a",
        "filename": "src/vnet/interface/rx_queue_funcs.h",
        "patchSetId": 12
      },
      "lineNbr": 31,
      "author": {
        "id": 845
      },
      "writtenOn": "2020-11-25T17:08:50Z",
      "side": 1,
      "message": "Same as before, this function shouldn\u0027t be exposed as it doesn\u0027t update_runtime_data.",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 31,
        "endChar": 31
      },
      "revId": "9df0134f832bd896bdf35099c530246fb22da5ce",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "effe9340_80cb5ebc",
        "filename": "src/vnet/interface/rx_queue_funcs.h",
        "patchSetId": 12
      },
      "lineNbr": 34,
      "author": {
        "id": 845
      },
      "writtenOn": "2020-11-25T17:08:50Z",
      "side": 1,
      "message": "Same",
      "range": {
        "startLine": 34,
        "startChar": 5,
        "endLine": 34,
        "endChar": 41
      },
      "revId": "9df0134f832bd896bdf35099c530246fb22da5ce",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "311e106f_22c19efe",
        "filename": "src/vnet/interface/rx_queue_funcs.h",
        "patchSetId": 12
      },
      "lineNbr": 36,
      "author": {
        "id": 845
      },
      "writtenOn": "2020-11-25T17:08:50Z",
      "side": 1,
      "message": "If the \"public\" functions exposed to the driver (and to the API/CLI layer) are properly doing the update_runtime_data, there is no reason that this function is exposed as well.",
      "range": {
        "startLine": 36,
        "startChar": 5,
        "endLine": 36,
        "endChar": 35
      },
      "revId": "9df0134f832bd896bdf35099c530246fb22da5ce",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": true
    }
  ]
}