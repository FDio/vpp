{
  "comments": [
    {
      "key": {
        "uuid": "e9240ec4_6ca23e07",
        "filename": "src/vnet/l2/l2_input_classify.c",
        "patchSetId": 1
      },
      "lineNbr": 170,
      "author": {
        "id": 7
      },
      "writtenOn": "2018-03-07T17:57:57Z",
      "side": 1,
      "message": "BUG: you can\u0027t index from[2] and from[3] if n_left_from is 2...",
      "revId": "32928e19c642c99ac8339c79c814ee3dadce2538",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "58f9c8f3_8f80c986",
        "filename": "src/vnet/l2/l2_input_classify.c",
        "patchSetId": 1
      },
      "lineNbr": 170,
      "author": {
        "id": 7
      },
      "writtenOn": "2018-03-07T18:05:28Z",
      "side": 1,
      "message": "Slight bug in the comment. You can\u0027t index from[3] when n_left_from is 3...",
      "parentUuid": "e9240ec4_6ca23e07",
      "revId": "32928e19c642c99ac8339c79c814ee3dadce2538",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6518b8e5_7e9101d1",
        "filename": "src/vnet/l2/l2_input_classify.c",
        "patchSetId": 1
      },
      "lineNbr": 170,
      "author": {
        "id": 320
      },
      "writtenOn": "2018-03-08T08:47:12Z",
      "side": 1,
      "message": "Thanks for the catch! \n\nI thought of three options to deal with this:\n\n1) put \u0027if (n_left_from \u003e 3)\u0027 around the whole block - this will not prefetch the one remaining buffer data in case the number of buffers is odd. The existing code misses to prefetch every other buffer, so even if incorrect that would be an improvement, but it is still incorrect :)\n\n2) put that same \"if\" around p3 assignment and prefetching. that is logically correct but introduces branching.\n\n3) replace 3 with \"2 + (n_left_from \u003e 3)\". This will either prefetch two buffers, or just prefetch the same buffer twice, which intuitively should be better than branching.\n\n(3) looked like the best option.",
      "parentUuid": "58f9c8f3_8f80c986",
      "revId": "32928e19c642c99ac8339c79c814ee3dadce2538",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6e9511e6_6ca0c929",
        "filename": "src/vnet/l2/l2_output_classify.c",
        "patchSetId": 1
      },
      "lineNbr": 163,
      "author": {
        "id": 7
      },
      "writtenOn": "2018-03-07T17:58:54Z",
      "side": 1,
      "message": "Different function, same bug...",
      "revId": "32928e19c642c99ac8339c79c814ee3dadce2538",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    }
  ]
}