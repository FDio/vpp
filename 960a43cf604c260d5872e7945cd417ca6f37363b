{
  "comments": [
    {
      "key": {
        "uuid": "ec4b66ff_7624d9d1",
        "filename": "src/vnet/devices/af_packet/af_packet.c",
        "patchSetId": 1
      },
      "lineNbr": 256,
      "author": {
        "id": 278
      },
      "writtenOn": "2018-04-27T14:08:09Z",
      "side": 1,
      "message": "Curious: why? It should be valid to wire the port and then bring it up when you\u0027re ready to pass traffic, otherwise you risk having Linux default behaviors interfering.",
      "range": {
        "startLine": 254,
        "startChar": 0,
        "endLine": 256,
        "endChar": 5
      },
      "revId": "960a43cf604c260d5872e7945cd417ca6f37363b",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3250afb1_2d5ee8f2",
        "filename": "src/vnet/devices/af_packet/af_packet.c",
        "patchSetId": 1
      },
      "lineNbr": 256,
      "author": {
        "id": 241
      },
      "writtenOn": "2018-05-02T07:47:22Z",
      "side": 1,
      "message": "I have seen this particular behavior when you already had an af_packet interface in working condition. Then you put it down and delete it from VPP which put it explicitly down in host side. See af-packet admin_up_down function. If you want to recreate that particular interface, you will not able to create the socket on it. \"show unix file\" will be best command to see the sockets attached to interfaces.",
      "parentUuid": "ec4b66ff_7624d9d1",
      "range": {
        "startLine": 254,
        "startChar": 0,
        "endLine": 256,
        "endChar": 5
      },
      "revId": "960a43cf604c260d5872e7945cd417ca6f37363b",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e6c46521_ec815662",
        "filename": "src/vnet/devices/af_packet/af_packet.c",
        "patchSetId": 1
      },
      "lineNbr": 256,
      "author": {
        "id": 540
      },
      "writtenOn": "2018-05-03T20:22:52Z",
      "side": 1,
      "message": "Kind of confused - if you are forcing the Linux Interface into an up state. You are back to a position where the state in VPP is disconnected with the state in the host OS?",
      "parentUuid": "3250afb1_2d5ee8f2",
      "range": {
        "startLine": 254,
        "startChar": 0,
        "endLine": 256,
        "endChar": 5
      },
      "revId": "960a43cf604c260d5872e7945cd417ca6f37363b",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d46d968e_6f35683f",
        "filename": "src/vnet/devices/af_packet/af_packet.c",
        "patchSetId": 1
      },
      "lineNbr": 256,
      "author": {
        "id": 241
      },
      "writtenOn": "2018-05-07T12:40:34Z",
      "side": 1,
      "message": "I think so, I should be bit more elaborative here!\nIf host side of interface is down, VPP will not able to create the af-packet socket on that interface. Please run the following script and reproduce what I am saying here:\n\n#!/bin/bash\n\nsudo ip netns add ns3\nsudo ip netns add ns4\n\nsudo ip link add veth5 type veth peer name veth6\nsudo ip link add veth7 type veth peer name veth8\n\nsudo ip link set veth6 netns ns3\nsudo ip link set veth8 netns ns4\n\nsudo ip netns exec ns3 ip link set veth6 up\nsudo ip netns exec ns4 ip link set veth8 up\n\nsudo ip netns exec ns3 ip addr add 10.0.1.1/24 dev veth6\nsudo ip netns exec ns4 ip addr add 10.0.1.2/24 dev veth8\n\n#################################################################\n# veth5 will be down and VPP will not able to bind socket on it #\n#################################################################\n\n#sudo ip link set veth5 up\nsudo ip link set veth7 up\n\nsudo vppctl create host-interface name veth5\nsudo vppctl set int state host-veth5 up\nsudo vppctl set int l2 bridge host-veth5 100\n\nsudo vppctl create host-interface name veth7\nsudo vppctl set int state host-veth7 up\nsudo vppctl set int l2 bridge host-veth7 100\n\nsudo vppctl show unix file",
      "parentUuid": "e6c46521_ec815662",
      "range": {
        "startLine": 254,
        "startChar": 0,
        "endLine": 256,
        "endChar": 5
      },
      "revId": "960a43cf604c260d5872e7945cd417ca6f37363b",
      "serverId": "6d2eb258-4fe2-443e-8a38-ca81da23d4c2",
      "unresolved": false
    }
  ]
}